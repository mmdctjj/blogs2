const n=JSON.parse(`{"key":"v-1760c7e4","path":"/vue/20230703.html","title":"Vue3ä½¿ç”¨hookå°è£…åª’ä½“æŸ¥è¯¢å’Œäº‹ä»¶ç›‘å¬ï¼Œä½¿Vueçš„å¼€å‘æ›´åŠ ä¸æ»‘ğŸš€ğŸš€ğŸš€","lang":"zh-CN","frontmatter":{"title":"Vue3ä½¿ç”¨hookå°è£…åª’ä½“æŸ¥è¯¢å’Œäº‹ä»¶ç›‘å¬ï¼Œä½¿Vueçš„å¼€å‘æ›´åŠ ä¸æ»‘ğŸš€ğŸš€ğŸš€","isTimeLine":true,"date":"2023-07-03T00:00:00.000Z","category":["å‰ç«¯"],"tag":["JavaScript","Vue"],"description":"æ–‡ç« åŒæ­¥åœ¨å…¬ä¼—å·ï¼šèŒèŒå“’è‰å¤´å°†å†›ï¼Œæ¬¢è¿å…³æ³¨ jsä¸­åª’ä½“æŸ¥è¯¢çš„ä¸»è¦æ–¹æ³•æ˜¯ä½¿ç”¨windowå¯¹è±¡ä¸‹çš„matchMediaå¯¹è±¡ï¼ŒæŸ¥è¯¢è¯­å¥å’ŒCSSåª’ä½“æŸ¥è¯¢ä¸€æ ·ã€‚ å°è£…åª’ä½“æŸ¥è¯¢ é¦–å…ˆæˆ‘ä»¬å…ˆçœ‹ç›‘å¬ç³»ç»Ÿä¸»é¢˜è‰²çš„ä¾‹å­ é¦–å…ˆåˆ›å»ºåª’ä½“æŸ¥è¯¢å¯¹è±¡ æ ¹æ®æŸ¥è¯¢ç»“æœè®¾ç½®å¯¹åº”çš„å€¼ ç„¶åå»ºç«‹ç›‘å¬äº‹ä»¶ï¼Œå¹¶ä¸”åœ¨é€€å‡ºæ—¶å–æ¶ˆç›‘å¬ export const useTheme = () =&gt; { // é¦–å…ˆåˆ›å»ºåª’ä½“æŸ¥è¯¢å¯¹è±¡ const themeMedia = matchMedia(\\"(prefers-color-scheme: light)\\") // æ ¹æ®æŸ¥è¯¢ç»“æœè®¾ç½®å¯¹åº”çš„å€¼ const theme = ref(themeMedia.matches ? 'light' : 'dark') const onChange = (e: MediaQueryListEvent) =&gt; theme.value = e.matches ? 'light' : 'dark' watchEffect((onCleanup) =&gt; { // ç„¶åå»ºç«‹ç›‘å¬äº‹ä»¶ themeMedia.addEventListener('change', onChange) // å¹¶ä¸”åœ¨é€€å‡ºæ—¶å–æ¶ˆç›‘å¬ onCleanup(() =&gt; themeMedia.removeEventListener('change', onChange)) }) return theme; }","head":[["meta",{"property":"og:url","content":"https://mmdctjj.github.io/blog2/blogs2/vue/20230703.html"}],["meta",{"property":"og:site_name","content":"èŒèŒå“’è‰å¤´å°†å†›"}],["meta",{"property":"og:title","content":"Vue3ä½¿ç”¨hookå°è£…åª’ä½“æŸ¥è¯¢å’Œäº‹ä»¶ç›‘å¬ï¼Œä½¿Vueçš„å¼€å‘æ›´åŠ ä¸æ»‘ğŸš€ğŸš€ğŸš€"}],["meta",{"property":"og:description","content":"æ–‡ç« åŒæ­¥åœ¨å…¬ä¼—å·ï¼šèŒèŒå“’è‰å¤´å°†å†›ï¼Œæ¬¢è¿å…³æ³¨ jsä¸­åª’ä½“æŸ¥è¯¢çš„ä¸»è¦æ–¹æ³•æ˜¯ä½¿ç”¨windowå¯¹è±¡ä¸‹çš„matchMediaå¯¹è±¡ï¼ŒæŸ¥è¯¢è¯­å¥å’ŒCSSåª’ä½“æŸ¥è¯¢ä¸€æ ·ã€‚ å°è£…åª’ä½“æŸ¥è¯¢ é¦–å…ˆæˆ‘ä»¬å…ˆçœ‹ç›‘å¬ç³»ç»Ÿä¸»é¢˜è‰²çš„ä¾‹å­ é¦–å…ˆåˆ›å»ºåª’ä½“æŸ¥è¯¢å¯¹è±¡ æ ¹æ®æŸ¥è¯¢ç»“æœè®¾ç½®å¯¹åº”çš„å€¼ ç„¶åå»ºç«‹ç›‘å¬äº‹ä»¶ï¼Œå¹¶ä¸”åœ¨é€€å‡ºæ—¶å–æ¶ˆç›‘å¬ export const useTheme = () =&gt; { // é¦–å…ˆåˆ›å»ºåª’ä½“æŸ¥è¯¢å¯¹è±¡ const themeMedia = matchMedia(\\"(prefers-color-scheme: light)\\") // æ ¹æ®æŸ¥è¯¢ç»“æœè®¾ç½®å¯¹åº”çš„å€¼ const theme = ref(themeMedia.matches ? 'light' : 'dark') const onChange = (e: MediaQueryListEvent) =&gt; theme.value = e.matches ? 'light' : 'dark' watchEffect((onCleanup) =&gt; { // ç„¶åå»ºç«‹ç›‘å¬äº‹ä»¶ themeMedia.addEventListener('change', onChange) // å¹¶ä¸”åœ¨é€€å‡ºæ—¶å–æ¶ˆç›‘å¬ onCleanup(() =&gt; themeMedia.removeEventListener('change', onChange)) }) return theme; }"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-07-30T11:02:39.000Z"}],["meta",{"property":"article:author","content":"èŒèŒå“’è‰å¤´å°†å†›"}],["meta",{"property":"article:tag","content":"JavaScript"}],["meta",{"property":"article:tag","content":"Vue"}],["meta",{"property":"article:published_time","content":"2023-07-03T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-07-30T11:02:39.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Vue3ä½¿ç”¨hookå°è£…åª’ä½“æŸ¥è¯¢å’Œäº‹ä»¶ç›‘å¬ï¼Œä½¿Vueçš„å¼€å‘æ›´åŠ ä¸æ»‘ğŸš€ğŸš€ğŸš€\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-07-03T00:00:00.000Z\\",\\"dateModified\\":\\"2023-07-30T11:02:39.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"èŒèŒå“’è‰å¤´å°†å†›\\",\\"url\\":\\"https://mmdctjj.github.io/blog2\\"}]}"]]},"headers":[{"level":3,"title":"å°è£…åª’ä½“æŸ¥è¯¢","slug":"å°è£…åª’ä½“æŸ¥è¯¢","link":"#å°è£…åª’ä½“æŸ¥è¯¢","children":[]},{"level":3,"title":"å°è£…äº‹ä»¶ç›‘å¬","slug":"å°è£…äº‹ä»¶ç›‘å¬","link":"#å°è£…äº‹ä»¶ç›‘å¬","children":[]}],"git":{"createdTime":1690709319000,"updatedTime":1690714959000,"contributors":[{"name":"mmdctjj","email":"jiangpengjie@bizseer.com","commits":2}]},"readingTime":{"minutes":2.66,"words":799},"filePathRelative":"vue/20230703.md","localizedDate":"2023å¹´7æœˆ3æ—¥","excerpt":"<blockquote>\\n<p>æ–‡ç« åŒæ­¥åœ¨å…¬ä¼—å·ï¼šèŒèŒå“’è‰å¤´å°†å†›ï¼Œæ¬¢è¿å…³æ³¨</p>\\n</blockquote>\\n<p>jsä¸­åª’ä½“æŸ¥è¯¢çš„ä¸»è¦æ–¹æ³•æ˜¯ä½¿ç”¨windowå¯¹è±¡ä¸‹çš„<code>matchMedia</code>å¯¹è±¡ï¼ŒæŸ¥è¯¢è¯­å¥å’ŒCSSåª’ä½“æŸ¥è¯¢ä¸€æ ·ã€‚</p>\\n<h3> å°è£…åª’ä½“æŸ¥è¯¢</h3>\\n<p>é¦–å…ˆæˆ‘ä»¬å…ˆçœ‹ç›‘å¬ç³»ç»Ÿä¸»é¢˜è‰²çš„ä¾‹å­</p>\\n<ul>\\n<li>é¦–å…ˆåˆ›å»ºåª’ä½“æŸ¥è¯¢å¯¹è±¡</li>\\n<li>æ ¹æ®æŸ¥è¯¢ç»“æœè®¾ç½®å¯¹åº”çš„å€¼</li>\\n<li>ç„¶åå»ºç«‹ç›‘å¬äº‹ä»¶ï¼Œå¹¶ä¸”åœ¨é€€å‡ºæ—¶å–æ¶ˆç›‘å¬</li>\\n</ul>\\n<div class=\\"language-javascript line-numbers-mode\\" data-ext=\\"js\\"><pre class=\\"language-javascript\\"><code><span class=\\"token keyword\\">export</span> <span class=\\"token keyword\\">const</span> <span class=\\"token function-variable function\\">useTheme</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n\\n  <span class=\\"token comment\\">// é¦–å…ˆåˆ›å»ºåª’ä½“æŸ¥è¯¢å¯¹è±¡</span>\\n  <span class=\\"token keyword\\">const</span> themeMedia <span class=\\"token operator\\">=</span> <span class=\\"token function\\">matchMedia</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"(prefers-color-scheme: light)\\"</span><span class=\\"token punctuation\\">)</span>\\n  <span class=\\"token comment\\">// æ ¹æ®æŸ¥è¯¢ç»“æœè®¾ç½®å¯¹åº”çš„å€¼</span>\\n  <span class=\\"token keyword\\">const</span> theme <span class=\\"token operator\\">=</span> <span class=\\"token function\\">ref</span><span class=\\"token punctuation\\">(</span>themeMedia<span class=\\"token punctuation\\">.</span>matches <span class=\\"token operator\\">?</span> <span class=\\"token string\\">'light'</span> <span class=\\"token operator\\">:</span> <span class=\\"token string\\">'dark'</span><span class=\\"token punctuation\\">)</span>\\n\\n  <span class=\\"token keyword\\">const</span> <span class=\\"token function-variable function\\">onChange</span> <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\"><span class=\\"token literal-property property\\">e</span><span class=\\"token operator\\">:</span> MediaQueryListEvent</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> theme<span class=\\"token punctuation\\">.</span>value <span class=\\"token operator\\">=</span> e<span class=\\"token punctuation\\">.</span>matches <span class=\\"token operator\\">?</span> <span class=\\"token string\\">'light'</span> <span class=\\"token operator\\">:</span> <span class=\\"token string\\">'dark'</span>\\n  \\n  <span class=\\"token function\\">watchEffect</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token parameter\\">onCleanup</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token comment\\">//  ç„¶åå»ºç«‹ç›‘å¬äº‹ä»¶</span>\\n    themeMedia<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">addEventListener</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'change'</span><span class=\\"token punctuation\\">,</span> onChange<span class=\\"token punctuation\\">)</span>\\n    <span class=\\"token comment\\">// å¹¶ä¸”åœ¨é€€å‡ºæ—¶å–æ¶ˆç›‘å¬</span>\\n    <span class=\\"token function\\">onCleanup</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">=&gt;</span> themeMedia<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">removeEventListener</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">'change'</span><span class=\\"token punctuation\\">,</span> onChange<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span>\\n  <span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>\\n\\n  <span class=\\"token keyword\\">return</span> theme<span class=\\"token punctuation\\">;</span>\\n<span class=\\"token punctuation\\">}</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}`);export{n as data};
