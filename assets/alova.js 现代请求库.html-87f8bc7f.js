import{_ as o}from"./plugin-vue_export-helper-c27b6911.js";import{r as c,o as l,c as i,f as p,a as s,b as t,e}from"./app-113da403.js";const u={},r={href:"https://mp.weixin.qq.com/s?__biz=Mzg2Mjc0NDc3OA==&mid=2247487736&idx=1&sn=cb970e6bb1712baaca82a36d844a97e1&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"},d={href:"https://mp.weixin.qq.com/s?__biz=Mzg2Mjc0NDc3OA==&mid=2247487693&idx=1&sn=22b292c563cb2dca376efdca0b6a37a5&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"},k={href:"https://mp.weixin.qq.com/s?__biz=Mzg2Mjc0NDc3OA==&mid=2247487549&idx=1&sn=3ce30ea55bfd058a369e87de13cb3197&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"},v={href:"https://mp.weixin.qq.com/s?__biz=Mzg2Mjc0NDc3OA==&mid=2247487736&idx=1&sn=cb970e6bb1712baaca82a36d844a97e1&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"},m={href:"https://mp.weixin.qq.com/s?__biz=Mzg2Mjc0NDc3OA==&mid=2247487693&idx=1&sn=22b292c563cb2dca376efdca0b6a37a5&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"},b={href:"https://mp.weixin.qq.com/s?__biz=Mzg2Mjc0NDc3OA==&mid=2247487549&idx=1&sn=3ce30ea55bfd058a369e87de13cb3197&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"};function g(h,n){const a=c("ExternalLinkIcon");return l(),i("div",null,[n[8]||(n[8]=p('<h3 id="前言" tabindex="-1"><a class="header-anchor" href="#前言" aria-hidden="true">#</a> 前言</h3><p>昨天介绍了 <code>pinia-colada</code> 库的基本使用，有个小伙伴评论里提到了 <code>alova</code>，好奇心驱使下，我研究了一会这个库，发现 <code>alova</code> 作为新一代请求策略库，正在改变开发者处理 <code>API</code> 交互的方式。</p><h4 id="往期精彩推荐" tabindex="-1"><a class="header-anchor" href="#往期精彩推荐" aria-hidden="true">#</a> 往期精彩推荐</h4>',3)),s("ul",null,[s("li",null,[s("a",r,[n[0]||(n[0]=t("TanStack：一款为现代 Web 开发打造的强大、无头且类型安全的库集合")),e(a)])]),s("li",null,[s("a",d,[n[1]||(n[1]=t("Zod 深度解析：TypeScript 运行时类型安全的终极实践")),e(a)])]),s("li",null,[s("a",k,[n[2]||(n[2]=t("Alova.js 现代化请求库完全指南")),e(a)])]),n[3]||(n[3]=s("li",null,"更多精彩内容欢迎关注我的公众号：萌萌哒草头将军",-1))]),n[9]||(n[9]=p(`<h3 id="核心特性与安装" tabindex="-1"><a class="header-anchor" href="#核心特性与安装" aria-hidden="true">#</a> 核心特性与安装</h3><p><code>alova</code> 是一个轻量级（仅 <code>4kb+</code>）但功能强大的请求库，具有以下突出特点：</p><ul><li>支持 <code>React/Vue/Svelte</code> 等主流框架</li><li>提供 <code>20+</code> 开箱即用的请求策略</li><li>内置请求缓存、数据预取等高级功能</li></ul><figure><img src="https://files.mdnice.com/user/43422/5ab015d5-5c4d-4b38-85ef-e19cc84b5873.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>安装方式极为简单：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> alova <span class="token parameter variable">--save</span>
<span class="token comment"># 或</span>
<span class="token function">yarn</span> <span class="token function">add</span> alova
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="基础使用示例" tabindex="-1"><a class="header-anchor" href="#基础使用示例" aria-hidden="true">#</a> 基础使用示例</h3><p>创建 Alova 实例：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createAlova <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;alova&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> VueHook <span class="token keyword">from</span> <span class="token string">&quot;alova/vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> adapterFetch <span class="token keyword">from</span> <span class="token string">&quot;alova/fetch&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> alovaInstance <span class="token operator">=</span> <span class="token function">createAlova</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">baseURL</span><span class="token operator">:</span> <span class="token string">&quot;https://api.example.com&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">statesHook</span><span class="token operator">:</span> VueHook<span class="token punctuation">,</span>
  <span class="token literal-property property">requestAdapter</span><span class="token operator">:</span> <span class="token function">adapterFetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">responded</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>发起基础请求：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// GET 请求</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> alovaInstance<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;/user/profile&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// POST 请求</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> alovaInstance
  <span class="token punctuation">.</span><span class="token function">Post</span><span class="token punctuation">(</span><span class="token string">&quot;/posts&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;新文章&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">&quot;这是内容...&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="高级请求策略" tabindex="-1"><a class="header-anchor" href="#高级请求策略" aria-hidden="true">#</a> 高级请求策略</h3><p><code>alova</code> 真正的强大之处在于其丰富的请求策略：</p><ol><li><strong>分页请求</strong>：</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>
  pageData<span class="token punctuation">,</span> <span class="token comment">// 当前页数据</span>
  isLastPage<span class="token punctuation">,</span> <span class="token comment">// 是否最后一页</span>
  nextPage<span class="token punctuation">,</span> <span class="token comment">// 加载下一页</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">usePagination</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">,</span> size</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> alovaInstance<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;/list&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> page<span class="token punctuation">,</span> size <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">initialPage</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">pageSize</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>智能监听请求</strong>：</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 当 keyword 变化时自动发送请求（带防抖）</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useWatcher</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> alovaInstance<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;/search&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> keyword <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>keyword<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">debounce</span><span class="token operator">:</span> <span class="token number">300</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><strong>请求重试机制</strong>：</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> onSuccess <span class="token punctuation">}</span> <span class="token operator">=</span> alovaInstance
  <span class="token punctuation">.</span><span class="token function">Post</span><span class="token punctuation">(</span><span class="token string">&quot;/order&quot;</span><span class="token punctuation">,</span> orderData<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">retry</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token comment">// 重试3次，间隔1秒</span>
  <span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="开发者工具支持" tabindex="-1"><a class="header-anchor" href="#开发者工具支持" aria-hidden="true">#</a> 开发者工具支持</h3><p><code>alova</code> 提供专属 <code>DevTools</code> 支持：</p><ul><li>实时监控请求状态</li><li>自动生成 <code>TypeScript</code> 类型定义</li><li>可视化调试请求缓存</li></ul><p>安装方式：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> @alova/devtools --save-dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>配置示例：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> devtools <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@alova/devtools&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> alova <span class="token operator">=</span> <span class="token function">createAlova</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...其他配置</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">devtools</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">enabled</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="性能优化技巧" tabindex="-1"><a class="header-anchor" href="#性能优化技巧" aria-hidden="true">#</a> 性能优化技巧</h3><ol><li><strong>数据预加载</strong>：</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 鼠标悬停时预加载</span>
<span class="token keyword">const</span> <span class="token function-variable function">prefetchData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">useFetcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span>alovaInstance<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;/detail/123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>请求共享</strong>：</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 多个组件共享同一个请求</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useRequest</span><span class="token punctuation">(</span>alovaInstance<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;/shared-data&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><strong>智能缓存</strong>：</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> alova <span class="token operator">=</span> <span class="token function">createAlova</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...其他配置</span>
  <span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">expire</span><span class="token operator">:</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// 设置1分钟缓存</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="结语" tabindex="-1"><a class="header-anchor" href="#结语" aria-hidden="true">#</a> 结语</h3><p><code>alova</code> 通过其创新的请求策略模式和极简的 <code>API</code> 设计，为现代前端开发带来了全新的数据交互体验。</p><h4 id="往期精彩推荐-1" tabindex="-1"><a class="header-anchor" href="#往期精彩推荐-1" aria-hidden="true">#</a> 往期精彩推荐</h4>`,36)),s("ul",null,[s("li",null,[s("a",v,[n[4]||(n[4]=t("TanStack：一款为现代 Web 开发打造的强大、无头且类型安全的库集合")),e(a)])]),s("li",null,[s("a",m,[n[5]||(n[5]=t("Zod 深度解析：TypeScript 运行时类型安全的终极实践")),e(a)])]),s("li",null,[s("a",b,[n[6]||(n[6]=t("Alova.js 现代化请求库完全指南")),e(a)])]),n[7]||(n[7]=s("li",null,"更多精彩内容欢迎关注我的公众号：萌萌哒草头将军",-1))])])}const q=o(u,[["render",g],["__file","alova.js 现代请求库.html.vue"]]);export{q as default};
