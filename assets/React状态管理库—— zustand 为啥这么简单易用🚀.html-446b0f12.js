import{_ as o}from"./plugin-vue_export-helper-c27b6911.js";import{r as c,o as l,c as i,a as n,b as t,e as p,f as e}from"./app-a32f32b6.js";const r={},u={href:"https://github.com/pmndrs/zustand/tree/main",target:"_blank",rel:"noopener noreferrer"},k={href:"https://github.com/pmndrs/zustand/blob/v4.4.1/docs/integrations/persisting-store-data.md",target:"_blank",rel:"noopener noreferrer"},d={href:"https://github.com/pmndrs/zustand/blob/v4.4.1/docs/integrations/third-party-libraries.md",target:"_blank",rel:"noopener noreferrer"},v={href:"https://juejin.cn/post/7246777363257475129",title:"https://juejin.cn/post/7246777363257475129",target:"_blank",rel:"noopener noreferrer"},m={href:"https://juejin.cn/post/7248982532728602681",title:"https://juejin.cn/post/7248982532728602681",target:"_blank",rel:"noopener noreferrer"},b={href:"https://juejin.cn/post/7242249906257363001",title:"https://juejin.cn/post/7242249906257363001",target:"_blank",rel:"noopener noreferrer"},g={href:"https://juejin.cn/post/7241567583504728119",title:"https://juejin.cn/post/7241567583504728119",target:"_blank",rel:"noopener noreferrer"},f={href:"https://juejin.cn/post/7240721866548740133",title:"https://juejin.cn/post/7240721866548740133",target:"_blank",rel:"noopener noreferrer"},y={href:"https://juejin.cn/post/7233762589720100919",title:"https://juejin.cn/post/7233762589720100919",target:"_blank",rel:"noopener noreferrer"},h={href:"https://juejin.cn/post/7230806990452850725",title:"https://juejin.cn/post/7230806990452850725",target:"_blank",rel:"noopener noreferrer"},C={href:"https://juejin.cn/post/7216526817372225593",title:"https://juejin.cn/post/7216526817372225593",target:"_blank",rel:"noopener noreferrer"};function w(j,s){const a=c("ExternalLinkIcon");return l(),i("div",null,[s[11]||(s[11]=n("blockquote",null,[n("p",null,"æ–‡ç« åŒæ­¥åœ¨å…¬ä¼—å·ï¼šèŒèŒå“’è‰å¤´å°†å†›ï¼Œæ¬¢è¿å…³æ³¨")],-1)),n("p",null,[n("a",u,[s[0]||(s[0]=t("GitHub åœ°å€ç‚¹è¿™é‡Œ")),p(a)])]),s[12]||(s[12]=e(`<h3 id="ğŸš€-ç®€å•æ˜“ç”¨çš„-zustand" tabindex="-1"><a class="header-anchor" href="#ğŸš€-ç®€å•æ˜“ç”¨çš„-zustand" aria-hidden="true">#</a> ğŸš€ ç®€å•æ˜“ç”¨çš„ <code>zustand </code></h3><h4 id="ğŸš€-ç®€å•çš„å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#ğŸš€-ç®€å•çš„å¯¹æ¯”" aria-hidden="true">#</a> ğŸš€ ç®€å•çš„å¯¹æ¯”</h4><p>è¯´åˆ°ä¸­å¤§å‹ React é¡¹ç›®çŠ¶æ€ç®¡ç†åº“ï¼Œæœ€å…ˆæƒ³åˆ°å°±æ˜¯ Reduxã€‚è€Œ Redux æ˜¯åŸºäº Flux æ¶æ„æ¨¡å¼çš„çŠ¶æ€ç®¡ç†åº“ã€‚</p><figure><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/390bca56268e4817963d25f5fd5403ec~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>Redux ç»§æ‰¿äº† Flux&quot;å•å‘æµåŠ¨&quot;çš„ç‰¹ç‚¹ï¼Œ</p><ol><li>ç”¨æˆ·ä¸ View è¿›è¡Œäº¤äº’ï¼Œè§¦å‘ç›¸åº”çš„ Actionsã€‚</li><li>Actions é€šè¿‡ Dispatcher è¿›è¡Œæ´¾å‘ã€‚</li><li>Stores æ¥æ”¶æ´¾å‘çš„ Actionsï¼Œå¹¶æ ¹æ®éœ€è¦æ›´æ–°çŠ¶æ€ã€‚</li><li>Stores æ›´æ–°åè§¦å‘äº‹ä»¶ï¼Œé€šçŸ¥ Views è¿›è¡Œç•Œé¢æ›´æ–°ã€‚</li><li>Views ä½¿ç”¨ Stores ä¸­çš„æœ€æ–°çŠ¶æ€é‡æ–°æ¸²æŸ“ç•Œé¢ã€‚</li></ol><p>ç„¶è€Œéšç€ Hook çš„æµè¡Œï¼ŒFlux æ¨¡å¼æ˜¾å¾—æ—¥ç›Šç¬¨é‡ã€‚åœ¨å¾ˆé•¿æ—¶é—´é‡Œï¼Œé€šå¸¸ä¼šé‡‡ç”¨ react è‡ªå¸¦çš„ createContext ä»£æ›¿ Redux çš„éœ€æ±‚ã€‚ä¸€ä¸ªç®€å•çš„ä¾‹å­å¦‚ä¸‹ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> createContext<span class="token punctuation">,</span> useContext<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ç±»å‹</span>
<span class="token keyword">interface</span> <span class="token class-name">CountContextProps</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">count</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
  <span class="token function-variable function">setCount</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">count</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// åˆ›å»ºä¸Šä¸‹æ–‡</span>
<span class="token keyword">const</span> CountContext <span class="token operator">=</span> createContext<span class="token operator">&lt;</span>CountContextProps <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æä¾›å™¨ç»„ä»¶</span>
<span class="token keyword">const</span> <span class="token literal-property property">CountProvider</span><span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token literal-property property">contextValue</span><span class="token operator">:</span> CountContextProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">,</span>
    setCount<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>CountContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>contextValue<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>children<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>CountContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// æ¶ˆè´¹è€…ç»„ä»¶</span>
<span class="token keyword">const</span> <span class="token literal-property property">Counter</span><span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> setCount <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>CountContext<span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">decrement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Count<span class="token operator">:</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>increment<span class="token punctuation">}</span><span class="token operator">&gt;</span>Increment<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>decrement<span class="token punctuation">}</span><span class="token operator">&gt;</span>Decrement<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// åº”ç”¨ç¨‹åºç»„ä»¶</span>
<span class="token keyword">const</span> <span class="token literal-property property">App</span><span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>CountProvider<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Counter <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>CountProvider<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è™½ç„¶æ˜¯ä¸ªç®€å•çš„ä¾‹å­ï¼Œä½†æ˜¯å®é™…å¼€å‘ä¸­ï¼Œæ­¥éª¤ i ä¾ç„¶ç¹çã€‚</p><p>é‚£ä¹ˆæœ‰æ²¡æœ‰æ›´ç®€ä¾¿çš„æ–¹æ¡ˆï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼</p><p>é‚£å°±æ˜¯ <code>zustand </code>ã€‚åŒæ ·åŠŸèƒ½çš„ä¾‹å­å®ç°å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> create <span class="token keyword">from</span> <span class="token string">&quot;zustand&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ›å»ºçŠ¶æ€å­˜å‚¨</span>
<span class="token keyword">interface</span> <span class="token class-name">CountState</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">count</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
  <span class="token function-variable function">increment</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function-variable function">decrement</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> useCountStore <span class="token operator">=</span>
  create <span class="token operator">&lt;</span>
  CountState <span class="token operator">&gt;</span>
  <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">set</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token function-variable function">increment</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">decrement</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ¶ˆè´¹è€…ç»„ä»¶</span>
<span class="token keyword">const</span> <span class="token literal-property property">Counter</span><span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> increment<span class="token punctuation">,</span> decrement <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useCountStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Count<span class="token operator">:</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>increment<span class="token punctuation">}</span><span class="token operator">&gt;</span>Increment<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>decrement<span class="token punctuation">}</span><span class="token operator">&gt;</span>Decrement<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// åº”ç”¨ç¨‹åºç»„ä»¶</span>
<span class="token keyword">const</span> <span class="token literal-property property">App</span><span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Counter <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç®€å•çš„å¯¹æ¯”ï¼Œå°±å¯ä»¥å‘ç° <code>zustand </code>æ²¡æœ‰ç‰¹å®šçš„æ¦‚å¿µï¼Œç®€å•æ˜“ç”¨ã€‚</p><h4 id="ğŸš€-ç›‘å¬å˜åŒ–" tabindex="-1"><a class="header-anchor" href="#ğŸš€-ç›‘å¬å˜åŒ–" aria-hidden="true">#</a> ğŸš€ ç›‘å¬å˜åŒ–</h4><p>é€šå¸¸ï¼Œå½“ store å˜åŒ–æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>useEffect</code> ç›‘å¬çŠ¶æ€å˜åŒ–</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// æ¶ˆè´¹è€…ç»„ä»¶</span>
<span class="token keyword">const</span> <span class="token literal-property property">Counter</span><span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> increment<span class="token punctuation">,</span> decrement <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useCountStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Count<span class="token operator">:</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>increment<span class="token punctuation">}</span><span class="token operator">&gt;</span>Increment<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>decrement<span class="token punctuation">}</span><span class="token operator">&gt;</span>Decrement<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½†æ˜¯å¦‚æœå½“çŠ¶æ€çš„å˜åŒ–ä¸æƒ³å¼•èµ·ç»„ä»¶çš„æ¸²æŸ“æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// æ¶ˆè´¹è€…ç»„ä»¶</span>
<span class="token keyword">const</span> <span class="token literal-property property">Counter</span><span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token function-variable function">FC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> count<span class="token punctuation">,</span> increment<span class="token punctuation">,</span> decrement <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useCountStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// useEffect(() =&gt; console.log(count), [count])</span>

  <span class="token comment">// æ³¨æ„ï¼ŒuseCountStore.subscribeçš„è¿”å›å€¼æ—¶å–æ¶ˆè®¢é˜…å‡½æ•°</span>
  <span class="token comment">// æ‰€ä»¥å½“ç»„ä»¶å¸è½½æ—¶ï¼Œä¼šè‡ªåŠ¨å–æ¶ˆè®¢é˜…</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> useCountStore<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Count<span class="token operator">:</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>increment<span class="token punctuation">}</span><span class="token operator">&gt;</span>Increment<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>decrement<span class="token punctuation">}</span><span class="token operator">&gt;</span>Decrement<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ğŸš€-ä¸­é—´ä»¶æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ğŸš€-ä¸­é—´ä»¶æ¨¡å¼" aria-hidden="true">#</a> ğŸš€ ä¸­é—´ä»¶æ¨¡å¼</h4><p><code>zustand</code> è¿˜åœ¨çŠ¶æ€ç®¡ç†çš„åŠŸèƒ½ä¸Šæä¾›äº†ä¸­é—´ä»¶åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå½“å¯¹åº”çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè‡ªåŠ¨æ›´æ–°<code>localStroge</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">log</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">set<span class="token punctuation">,</span> get<span class="token punctuation">,</span> api</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token function">localStroge</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// è¿™é‡Œargsä¸ºset({ count })çš„å‚æ•°å°±{ count }</span>
      localStroge<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">,</span> args<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    get<span class="token punctuation">,</span>
    api
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> useCountStore <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span>
  <span class="token function">localStroge</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">set</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token function-variable function">setCount</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ç„¶ï¼Œ<code>zustand</code>æä¾›äº†å†…ç½®çš„ä¸€äº›ä¸­é—´ä»¶ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&quot;./middleware/redux.ts&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&quot;./middleware/devtools.ts&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&quot;./middleware/subscribeWithSelector.ts&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&quot;./middleware/combine.ts&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&quot;./middleware/persist.ts&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,23)),n("p",null,[n("a",k,[s[1]||(s[1]=t("æ–‡æ¡£å¯ä»¥å‚çœ‹è¿™é‡Œ")),p(a)])]),n("p",null,[n("a",d,[s[2]||(s[2]=t("ç¤¾åŒºä¸­é—´ä»¶ä¹Ÿååˆ†ä¸°å¯Œï¼Œè¯¦ç»†è¯·çœ‹è¿™é‡Œ")),p(a)])]),s[13]||(s[13]=e('<h3 id="ğŸš€-æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#ğŸš€-æ€»ç»“" aria-hidden="true">#</a> ğŸš€ æ€»ç»“</h3><p><code>zustand</code> å‡­å€Ÿå°å·§çš„ä½“ç§¯ï¼ˆ2kbï¼‰å’Œç®€å•æ˜“ç”¨çš„ç‰¹æ€§ï¼Œè¿…é€Ÿè·å¾— <code>GitHub</code> 34.3k çš„ <code>star</code>ï¼Œè¶³ä»¥è¯´æ˜å®ƒçš„å¥½ç”¨ã€‚</p><p>å¥½äº†ä»Šå¤©çš„æ–‡ç« åˆ†äº«åˆ°è¿™äº†ï¼Œä¸‹ç¯‡æ–‡ç« æˆ‘ä»¬ä»æºç çš„è§’åº¦è¿›ä¸€æ­¥çš„è®¤è¯† <code>zustand</code> ï¼</p><h3 id="æ›´å¤šæ–‡ç« " tabindex="-1"><a class="header-anchor" href="#æ›´å¤šæ–‡ç« " aria-hidden="true">#</a> æ›´å¤šæ–‡ç« </h3>',4)),n("ul",null,[n("li",null,[n("p",null,[n("a",v,[s[3]||(s[3]=t("ğŸ¤® æ˜¯æ—¶å€™æ”¾å¼ƒ useState äº†ï¼ŒğŸš€ è¿™ä¹ˆå†™ React æ›´ä¸æ»‘ ğŸš€")),p(a)])])]),n("li",null,[n("p",null,[n("a",m,[s[4]||(s[4]=t("ğŸ‰ å¹²è´§æ»¡æ»¡ï¼ŒReact è®¾è®¡åŸç†(ä¸‰)ï¼šè—åœ¨æºç é‡Œçš„æ’ä½èµ›ï¼ŒLane æ¨¡å‹ ğŸ‰")),p(a)])])]),n("li",null,[n("p",null,[n("a",b,[s[5]||(s[5]=t("ğŸ‰ å¹²è´§æ»¡æ»¡ï¼ŒReact è®¾è®¡åŸç†(äºŒ)ï¼šè—åœ¨æºç é‡Œçš„ä¸¤ä¸ªåœˆ ğŸ‰")),p(a)])])]),n("li",null,[n("p",null,[n("a",g,[s[6]||(s[6]=t("ğŸ‰ å¹²è´§æ»¡æ»¡ï¼ŒReact è®¾è®¡åŸç†(ä¸€)ï¼šè—åœ¨æºç é‡Œçš„ç´§ç®å’’ï¼Œå‡ ä¸ªå®¹æ˜“æ··æ·†çš„å˜é‡ ğŸ‰")),p(a)])])]),n("li",null,[n("p",null,[n("a",f,[s[7]||(s[7]=t("ğŸ¤”useMemo è¿˜å¯ä»¥è¿™æ ·ç”¨ï¼ŸuseCallbackï¼šç³Ÿäº†ï¼Œæˆ‘æˆæ›¿èº«äº†ï¼")),p(a)])])]),n("li",null,[n("p",null,[n("a",y,[s[8]||(s[8]=t("ğŸ”” å®~ï¼Œä½ æœ‰å‡ ä¸ªç³»ç»Ÿçº§äº¤äº’çš„ React hooks å¾…æŸ¥æ”¶")),p(a)])])]),n("li",null,[n("p",null,[n("a",h,[s[9]||(s[9]=t("ğŸ‰React å‡ ä¸ªä¸å¸¸ç”¨ï¼Œä½†æ˜¯å¯ä»¥å››ä¸¤æ‹¨åƒæ–¤çš„ hooksğŸ‰")),p(a)])])]),n("li",null,[n("p",null,[n("a",C,[s[10]||(s[10]=t("ä¼˜ç¾çš„ Reactl åˆ—è¡¨åŠ¨ç”»ï¼šStyled-Components åŠ¨ç”»å®è·µ")),p(a)])])])])])}const R=o(r,[["render",w],["__file","ReactçŠ¶æ€ç®¡ç†åº“â€”â€” zustand ä¸ºå•¥è¿™ä¹ˆç®€å•æ˜“ç”¨ğŸš€.html.vue"]]);export{R as default};
