import{_ as o}from"./plugin-vue_export-helper-c27b6911.js";import{r as c,o as l,c as i,f as t,a as s,b as p,e}from"./app-5a910848.js";const u={},r={href:"https://juejin.cn/post/7236719086049837093",target:"_blank",rel:"noopener noreferrer"},k={href:"https://juejin.cn/post/7226689042406637624",target:"_blank",rel:"noopener noreferrer"};function d(v,n){const a=c("ExternalLinkIcon");return l(),i("div",null,[n[3]||(n[3]=t('<blockquote><p>æ–‡ç« é¦–å‘åœ¨å…¬ä¼—å·ï¼šèŒèŒå“’è‰å¤´å°†å†›ï¼Œæœ€è¿‘å…³æ³¨æœ‰æŠ½äº”æœ¬ä¹¦é€ç»™å¤§å®¶ï¼Œå…³æ³¨åå›å¤ï¼šæ´»åŠ¨</p></blockquote><p align="center"><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3a30a0f552e84feba7e9fd8207eb582d~tplv-k3u1fbpfcp-watermark.image?" alt="grif.gif" width="50%"></p><p>æœ€è¿‘æˆ‘åˆåˆåŒå­¦ä¹ äº†ä¸€ä¸ªæ–°æ¡†æ¶ï¼Œ<code>Qwik</code></p><p align="center"><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a971a174b4564496ac766e9ec7022a25~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" width="30%"></p><p>çœŸçš„æ²¡å®Œæ²¡äº†äº†ï¼Œ</p><p align="center"><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7509dc3757a348f5a91e6e58b6e1658d~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" width="30%"></p><p>ä¸è¿‡ä½œä¸º&quot;å‰ç«¯å¨±ä¹åœˆæˆ˜åœ°è®°è€…&quot;ï¼Œæˆ‘ç»§ç»­å¸®å¤§å®¶è¸©é›·ã€‚</p><p align="center"><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/16aab0927d8f46e0ba95475aca38b694~tplv-k3u1fbpfcp-watermark.image?" alt="Screenshot_2023-06-11-19-13-32-405_com.daimajia.gold-edit.jpg"></p><h3 id="ğŸ’¡-åŒç³»åˆ—é˜…è¯»" tabindex="-1"><a class="header-anchor" href="#ğŸ’¡-åŒç³»åˆ—é˜…è¯»" aria-hidden="true">#</a> ğŸ’¡ åŒç³»åˆ—é˜…è¯»</h3>',9)),s("ul",null,[s("li",null,[s("a",r,[n[0]||(n[0]=p("å­¦ä¸å®Œçš„æ¡†æ¶ï¼ŒğŸ”å•„ä¸å®Œçš„ç±³ï¼ŒSolidJSï¼Œä½ åˆ°åº•çˆ±è°ï¼ŸğŸ˜˜")),e(a)])]),s("li",null,[s("a",k,[n[1]||(n[1]=p("ğŸ”¥è¶…çº§ç®€å•çš„Svelteï¼Œå­¦ä¸ä¼šä½ æ¥æ‰“æˆ‘")),e(a)])]),n[2]||(n[2]=s("li",null,"çœŸå¿ƒå¸Œæœ›ä¸ä¼šæœ‰çƒ§ä¸æ–­åœ°é”è¿™ç¯‡æ–‡ç« ï¼ï¼ï¼",-1))]),n[4]||(n[4]=t(`<h2 id="ğŸ’-åˆè¯†qwik" tabindex="-1"><a class="header-anchor" href="#ğŸ’-åˆè¯†qwik" aria-hidden="true">#</a> ğŸ’ åˆè¯†qwik</h2><p>åºŸè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬å…ˆä¸Šä»£ç ã€‚ä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨åŠŸèƒ½</p><h3 id="ğŸš€-usesignal" tabindex="-1"><a class="header-anchor" href="#ğŸš€-usesignal" aria-hidden="true">#</a> ğŸš€ <code>useSignal</code></h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token function">component$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  
  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">useSignal</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick$<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> count<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>count<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è®©æˆ‘ä»¬ç»™è¿™ä¸ªè®¡æ•°å™¨åŠ ä¸Šç›‘å¬äº‹ä»¶ï¼ˆåé¢ä¼šè¯¦ç»†è®²ï¼‰</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>  <span class="token function">useVisibleTask$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> track <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/83291b82343845fa928fe3973369022e~tplv-k3u1fbpfcp-watermark.image?" alt="sigal.gif" tabindex="0" loading="lazy"><figcaption>sigal.gif</figcaption></figure><p><code>useSignal</code>ï¼Œè™½ç„¶è®©æˆ‘æƒ³èµ·æ¥äº†ç†Ÿæ‚‰åœ°<code>SolidJS</code>ï¼Œä½†æ˜¯çœ‹å†™æ³•ï¼Œè¿™ä¸å°±æ˜¯<code>vue3</code>çš„<code>ref</code>å—ï¼Ÿæ˜¯çš„ï¼Œçœ‹èµ·æ¥å¾ˆåƒï¼Œé‚£æœ‰æ²¡æœ‰ç±»ä¼¼<code>reactive</code>å‘¢ï¼Ÿ</p><h3 id="ğŸš€-usestore" tabindex="-1"><a class="header-anchor" href="#ğŸš€-usestore" aria-hidden="true">#</a> ğŸš€ <code>useStore</code></h3><p>å½“ç„¶æœ‰å•Šï¼Œ<code>useSignal</code>æ˜¯é’ˆå¯¹åŸºæœ¬å˜é‡çš„ã€‚å¯¹äºéåŸºæœ¬ç±»å‹å¯ä»¥ä½¿ç”¨<code>useStore</code>ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token function">component$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick$<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> data<span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/83291b82343845fa928fe3973369022e~tplv-k3u1fbpfcp-watermark.image?" alt="sigal.gif" tabindex="0" loading="lazy"><figcaption>sigal.gif</figcaption></figure><p><code>useStore</code>å¯ä»¥å¬æä¾›æ–¹æ³•ï¼Œä¸è¿‡æ¯”è¾ƒå¤æ‚ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  $<span class="token punctuation">,</span>
  type <span class="token constant">QRL</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@builder.io/qwik&quot;</span><span class="token punctuation">;</span>
 
type Store <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">count</span><span class="token operator">:</span> number
  <span class="token literal-property property">add</span><span class="token operator">:</span> <span class="token constant">QRL</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">this</span><span class="token operator">:</span> Store</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token function">component$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> useStore<span class="token operator">&lt;</span>Store<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">add</span><span class="token operator">:</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">this</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick$<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> data<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>  
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/83291b82343845fa928fe3973369022e~tplv-k3u1fbpfcp-watermark.image?" alt="sigal.gif" tabindex="0" loading="lazy"><figcaption>sigal.gif</figcaption></figure><h3 id="ğŸš€-usecomputed" tabindex="-1"><a class="header-anchor" href="#ğŸš€-usecomputed" aria-hidden="true">#</a> ğŸš€ <code>useComputed$</code></h3><p><code>reactive</code>æœ‰äº†ï¼Œ<code>computed</code>æ˜¯ä¸æ˜¯ä¹Ÿåº”è¯¥æœ‰å•Šï¼Œæ¥äº†ï¼Œå®ƒå°±æ˜¯<code>useComputed$</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>  <span class="token keyword">const</span> capitalizedName <span class="token operator">=</span> <span class="token function">useComputed$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> count<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token string">&#39;mmdctjj&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useVisibleTask$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> track <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>capitalizedName<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1e6f6f13b23b48089aaf69b0cd8bd6e4~tplv-k3u1fbpfcp-watermark.image?" alt="computer.gif" tabindex="0" loading="lazy"><figcaption>computer.gif</figcaption></figure><h3 id="ğŸš€-usecontext" tabindex="-1"><a class="header-anchor" href="#ğŸš€-usecontext" aria-hidden="true">#</a> ğŸš€ <code>useContext</code></h3><p>é‚£ä¾èµ–æ³¨å…¥æœ‰æ²¡æœ‰å•Šï¼ŸæŠ±æ­‰ï¼Œæ²¡æœ‰ï¼Œå› ä¸º<code>Qwik</code>æ˜¯åŸºäº<code>jsx</code>çš„æ¡†æ¶ï¼Œæ‰€ä»¥åªæœ‰æ‹¿<code>useContext</code>æ¥å°†å°±äº†</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>
type Store <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">count</span><span class="token operator">:</span> number
  <span class="token literal-property property">add</span><span class="token operator">:</span> <span class="token constant">QRL</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">this</span><span class="token operator">:</span> Store</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ğŸš— åˆ›å»ºå…¨å±€çš„ä¸Šä¸‹æ–‡</span>
<span class="token keyword">const</span> context <span class="token operator">=</span> createContextId<span class="token operator">&lt;</span>Store<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&#39;uuid&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token function">component$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

  <span class="token keyword">const</span> data <span class="token operator">=</span> useStore<span class="token operator">&lt;</span>Store<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">add</span><span class="token operator">:</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">this</span></span><span class="token punctuation">)</span> 
      <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// ğŸš— provideræ•°æ®</span>
  <span class="token function">useContextProvider</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick$<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> data<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>  
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> Child <span class="token operator">=</span> <span class="token function">component$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ğŸš— æ¶ˆè´¹ä¸Šä¸‹æ–‡</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Child <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>  
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¥½å§ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¯´äº›ä¸ä¸€æ ·çš„</p><h3 id="ğŸš€-usetask-or-usevisibletask" tabindex="-1"><a class="header-anchor" href="#ğŸš€-usetask-or-usevisibletask" aria-hidden="true">#</a> ğŸš€ <code>useTask$</code> or <code>useVisibleTask$</code></h3><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„ç›‘å¬äº‹ä»¶éƒ½æ˜¯é€šè¿‡<code>useVisibleTask$</code>å®ç°çš„ã€‚è™½ç„¶å®ƒçœ‹èµ·æ¥å’Œ<code>useEffect</code>ç±»ä¼¼ï¼Œä½†æ˜¯å´æœ‰ç€å¾ˆå¤§çš„åŒºåˆ«ã€‚</p><p>è¿™å¾—ä»<code>qwik</code>çš„æ¶æ„è¯´èµ·ï¼Œé¦–å…ˆ<code>Qwik</code>æ˜¯ä¸ªæœåŠ¡ç«¯æ¸²æŸ“çš„æ¡†æ¶ï¼Œç›¸å½“äº<code>Next.js</code>ï¼ˆåŸºäº<code>React</code>æœåŠ¡ç«¯æ¸²æŸ“æ¡†æ¶ï¼‰ã€ <code>Nuxt.js</code>(åŸºäº<code>Vue</code>åœ°æœåŠ¡ç«¯æ¸²æŸ“æ¡†æ¶)ï¼Œæ¢å¥è¯è¯´ï¼Œå®ƒå¤©ç”Ÿæ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“çš„å‰ç«¯æ¡†æ¶ã€‚æ‰€ä»¥ä¸€ä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»æœåŠ¡å™¨å¼€å§‹çš„ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>        useTask$ <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token constant">RENDER</span> <span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span> useVisibleTask$
<span class="token operator">||</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token constant">SERVER</span> or <span class="token constant">BROWSER</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token operator">|</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token constant">BROWSER</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token operator">||</span> 
                        pause<span class="token operator">|</span>resume
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®ƒä»¬éƒ½æ˜¯ç”¨æ¥æ³¨å†Œä»»åŠ¡çš„é’©å­å‡½æ•°ï¼Œè¿™ä¸ªä»»åŠ¡åœ¨æœåŠ¡ç«¯ä»…ä»…æ‰§è¡Œä¸€æ¬¡ï¼Œåœ¨å®¢æˆ·ç«¯å¯èƒ½å¤šæ¬¡æ¸²æŸ“ã€‚</p><p>ä¸‹é¢æ˜¯å…·ä½“çš„åŒºåˆ«</p><h4 id="ğŸ‘‰-usetask" tabindex="-1"><a class="header-anchor" href="#ğŸ‘‰-usetask" aria-hidden="true">#</a> ğŸ‘‰ <code>useTask$</code></h4><p><code>useTask$</code>é¦–å…ˆåœ¨æœåŠ¡ç«¯æ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœå®¢æˆ·ç«¯ä½¿ç”¨<code>track</code>è®¢é˜…ä¾èµ–äº†ï¼Œé‚£ä¹ˆå½“å®¢æˆ·ç«¯æ¸²æŸ“ä¹‹åè§¦å‘æ›´æ–°æ—¶ï¼Œä»»åŠ¡ä¼šåœ¨å®¢æˆ·ç«¯å†æ¬¡æ‰§è¡Œã€‚å¦‚æœæ²¡æœ‰<code>track</code>ï¼Œé‚£ä¹ˆä»…ä»…åœ¨å®¢æˆ·ç«¯æ‰§è¡Œä¸€æ¬¡ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token function">component$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  
  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">useSignal</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token function">useTask$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> track <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick$<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> count<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>count<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/26c97ff1877f499aa2b1e842b5bb340f~tplv-k3u1fbpfcp-watermark.image?" alt="task.gif" tabindex="0" loading="lazy"><figcaption>task.gif</figcaption></figure><p>é¡µé¢åˆ·æ–°åæœåŠ¡ç«¯ä¹Ÿæ‰§è¡Œäº†ä¸€æ¬¡ä»»åŠ¡</p><h4 id="ğŸ‘‰-usevisibletask" tabindex="-1"><a class="header-anchor" href="#ğŸ‘‰-usevisibletask" aria-hidden="true">#</a> ğŸ‘‰ <code>useVisibleTask$</code></h4><p><code>useVisibleTask$</code>ï¼šä»…ä»…åœ¨æµè§ˆå™¨æ‰§è¡Œï¼Œæ¸²æŸ“ä¹‹åç«‹é©¬æ‰§è¡Œï¼Œå½“è®¢é˜…çš„å‚æ•°å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä»»åŠ¡ä¼šè¢«å†æ¬¡æ‰§è¡Œã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> App <span class="token operator">=</span> <span class="token function">component$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  
  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">useSignal</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token function">useVisibleTask$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> track <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick$<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> count<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>count<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e2a30da9a56e4a77bd5d3b9d24d80d58~tplv-k3u1fbpfcp-watermark.image?" alt="taskvis.gif" tabindex="0" loading="lazy"><figcaption>taskvis.gif</figcaption></figure><p>å®ƒä»¬è¿˜æœ‰ä¸€ä¸ªç‰¹åˆ«é‡è¦çš„å‚æ•°<code>cleanup</code>ï¼Œæ¯æ¬¡æ–°çš„ä»»åŠ¡è¢«è§¦å‘æ—¶ï¼Œéƒ½ä¼šæ‰§è¡Œä¸Šæ¬¡ä»»åŠ¡çš„<code>cleanup</code>ã€‚å¦å¤–ç»„ä»¶è¢«ç§»é™¤æ—¶ä¹Ÿä¼šè¢«æ‰§è¡Œã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>  <span class="token function">useVisibleTask$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> track<span class="token punctuation">,</span> cleanup  <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// console.log(&#39;I am excuted!&#39;)</span>
    <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;last&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b3f6cb2524fa4a13bc23770c943e768f~tplv-k3u1fbpfcp-watermark.image?" alt="cleanup.gif" tabindex="0" loading="lazy"><figcaption>cleanup.gif</figcaption></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ¯æ¬¡ä»»åŠ¡è§¦å‘éƒ½æ˜¯å…ˆæ‰“å°<code>last</code>ï¼Œç„¶åæ‰æ˜¯æœ€æ–°çš„<code>count.value</code></p><p>å¦å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªé‡è¦çš„é…ç½®é¡¹ï¼š<code>{ strategy: &#39;document-ready&#39; }</code>ï¼Œæ­¤æ—¶ï¼Œä¼šåœ¨é¡µé¢åŠ è½½å®Œæ¯•ç«‹é©¬æ‰§è¡Œã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>  <span class="token function">useVisibleTask$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ¸²æŸ“å®Œæ¯•ä¹‹åæ‰§è¡Œ</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2222</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">useVisibleTask$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// document-readyç«‹é©¬æ‰§è¡Œ</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1111</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">strategy</span><span class="token operator">:</span> <span class="token string">&#39;document-ready&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ—¶<code>console</code>çš„æ‰“å°ç»“æœæ˜¯å…ˆ<code>1111</code>ï¼Œç„¶åæ˜¯<code>2222</code>ã€‚</p><h4 id="ğŸ‘‰-å¸®å®ƒæ¨¡æ‹Ÿå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#ğŸ‘‰-å¸®å®ƒæ¨¡æ‹Ÿå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸ" aria-hidden="true">#</a> ğŸ‘‰ å¸®å®ƒæ¨¡æ‹Ÿå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸ</h4><p>ç»¼ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿå‡ºä¸€ä¸ªå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸ</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>  <span class="token function">useVisibleTask$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;before mounted!&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">strategy</span><span class="token operator">:</span> <span class="token string">&#39;document-ready&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  
  <span class="token function">useVisibleTask$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> cleanup <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;mounted!&#39;</span><span class="token punctuation">)</span>
    <span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;unmount&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  
  <span class="token function">useVisibleTask$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> track<span class="token punctuation">,</span> cleanup <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;updated!&#39;</span><span class="token punctuation">,</span> count<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;before update&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å”¯ä¸€çš„ç‘•ç–µæ˜¯<code>before update</code>ä¼šåœ¨ç»„ä»¶é”€æ¯æ—¶å’Œ<code>unmount</code>ä¸€èµ·æ‰§è¡Œä¸€æ¬¡ã€‚</p><figure><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d7fdf3405ca54d76b0dbfd868234f771~tplv-k3u1fbpfcp-watermark.image?" alt="mounted.gif" tabindex="0" loading="lazy"><figcaption>mounted.gif</figcaption></figure><h2 id="ğŸ’-æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#ğŸ’-æ€»ç»“" aria-hidden="true">#</a> ğŸ’ æ€»ç»“</h2><p><code>qwik</code>ä¸Šçº¿ä¸€å¹´ä¸åˆ°å·²ç»<code>17.9k</code>åœ°<code>star</code>äº†ï¼Œè¶³è§å®ƒåœ°ä¼˜ç§€äº†ï¼</p><p>ä»Šå¤©çš„åˆ†äº«å°±è¿™äº›ï¼Œå¦‚æœå¤§å®¶å–œæ¬¢æˆ‘ä¸€å®šä¼šå†å‡ºä¸€ç¯‡ä»‹ç»å…¶å®ƒå‡ ä¸ªæœ‰æ„æ€çš„<code>Api</code>çš„å’Œç¼–è¯‘ç›¸å…³çš„æ–‡ç« ã€‚</p><p>å¦‚æœæ–‡ä¸­æœ‰çº°æ¼çš„åœ°æ–¹æ¬¢è¿æŒ‡æ­£</p><p>æˆ‘çš„æ–‡ç« é¦–å‘åœ¨å…¬ä¼—å·ï¼šèŒèŒå“’è‰å¤´å°†å†›ï¼Œå¦‚æœä½ æƒ³è”ç³»æˆ‘ï¼Œå¯ä»¥åŠ æˆ‘<code>SunBoy_mmdctjj</code>ï¼Œæˆ‘ä»¬ä¸€èµ·æˆé•¿</p>`,55))])}const g=o(u,[["render",d],["__file","å­¦ä¸å®Œçš„æ¡†æ¶ï¼ŒğŸ•èˆ”ä¸å®Œçš„é¢ï¼ŒQwikï¼Œä½ åˆ°åº•æƒ³å˜å“ˆ.html.vue"]]);export{g as default};
