import{_ as p}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as e,c,a as n,b as s,e as t,f as l}from"./app-a09c4eb3.js";const i={},u=n("blockquote",null,[n("p",null,"æ–‡ç« åŒæ­¥åœ¨å…¬ä¼—å·ï¼š èŒèŒå“’è‰å¤´å°†å†›"),n("p",null,"æœ€è¿‘å…¬ä¼—å·æœ‰ğŸï¼Œæ¬¢è¿å…³æ³¨äº†è§£")],-1),r=n("p",null,[s("æœ€è¿‘åœ¨ç ”ç©¶æ¡†æ¶ï¼Œä¹Ÿä»”ç»†ç”¨äº†"),n("code",null,"Vue3"),s("ä¸€äº›åŠŸèƒ½ï¼Œä»Šå¤©åˆ†äº«ä¸€æ¬¡æˆ‘çš„å®è·µï¼š")],-1),k=n("p",null,[n("strong",null,[n("code",null,"Vue3"),s("å¦‚ä½•ç›‘å¬"),n("code",null,"localStorage"),s("çš„å˜åŒ–ã€‚")])],-1),d={href:"https://juejin.cn/post/7241567583504728119",title:"https://juejin.cn/post/7241567583504728119",target:"_blank",rel:"noopener noreferrer"},v={href:"https://juejin.cn/post/7242249906257363001",target:"_blank",rel:"noopener noreferrer"},m=l(`<h3 id="ğŸ’¡-ä¸ºä»€ä¹ˆè¦è¿™æ ·åš" tabindex="-1"><a class="header-anchor" href="#ğŸ’¡-ä¸ºä»€ä¹ˆè¦è¿™æ ·åš" aria-hidden="true">#</a> ğŸ’¡ ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Ÿ</h3><p>åŸç”Ÿçš„<code>localStorage</code>åªèƒ½ç›‘å¬åŒæºåœ°å€ä¸‹ä¸åŒé¡µé¢çš„<code>localStorage</code>å˜åŒ–ï¼Œä½œä¸ºå•é¡µé¢åº”ç”¨ï¼Œæ˜¾ç„¶ä¸å®ç”¨ã€‚æ‰€ä»¥æˆ‘æ‰“ç®—è‡ªå®šä¹‰ä¸€ä¸ª<code>hook</code>ç›‘å¬<code>localStorage</code>çš„å˜åŒ–ã€‚</p><h3 id="ğŸ’-æ€è·¯" tabindex="-1"><a class="header-anchor" href="#ğŸ’-æ€è·¯" aria-hidden="true">#</a> ğŸ’ æ€è·¯</h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦é‡å†™<code>localStorage</code>ä¸‹çš„æ‰€æœ‰æ–¹æ³•ï¼Œè¿™æ ·åœ¨æ¯ä¸ªæ–¹æ³•è¢«ä½¿ç”¨çš„æ—¶å€™å°±å¯ä»¥è¢«ç›‘å¬åˆ°äº†ã€‚</p><p>æ­¤æ—¶å°±éœ€è¦ä¸€ä¸ªäº‹ä»¶æœºåˆ¶ï¼Œç”¨äºä¼ é€’æ¶ˆæ¯ã€‚</p><p>åœ¨<code>Vue3</code>ç§»é™¤äº†<code>$on</code>ã€<code>$emit</code>äº‹ä»¶æ¥å£åï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©ç¬¬ä¸‰æ–¹åº“å®ç°ï¼š<code>mitt</code>ã€<code>tiny-emitter</code>.</p><p>ä¸è¿‡æˆ‘æ‰“ç®—ä½¿ç”¨è‡ªå·±å®ç°çš„<code>ä¸­ä»‹è€…æ¨¡å¼</code>ä½œä¸ºé€šä¿¡æ–¹æ³•ã€‚</p><h3 id="ğŸ’-å®ç°" tabindex="-1"><a class="header-anchor" href="#ğŸ’-å®ç°" aria-hidden="true">#</a> ğŸ’ å®ç°</h3><h4 id="ğŸš—-å®ç°ä¸­ä»‹è€…æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ğŸš—-å®ç°ä¸­ä»‹è€…æ¨¡å¼" aria-hidden="true">#</a> ğŸš— å®ç°<code>ä¸­ä»‹è€…æ¨¡å¼</code></h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// mediator.ts</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">MediatorProps</span> <span class="token punctuation">{</span>
  uuid<span class="token operator">?</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
  publish<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">topic</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token operator">:</span> unknown<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  subscribe<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span>topic<span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> unknown<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> mediator <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> topics <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    uuid <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">subscribe</span><span class="token punctuation">(</span>topic<span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> unknown<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    uuid<span class="token operator">++</span><span class="token punctuation">;</span>
    topics<span class="token punctuation">[</span>topic<span class="token punctuation">]</span> <span class="token operator">=</span> topics<span class="token punctuation">[</span>topic<span class="token punctuation">]</span>
      <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token operator">...</span>topics<span class="token punctuation">[</span>topic<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> callback<span class="token punctuation">,</span> uuid <span class="token punctuation">}</span><span class="token punctuation">]</span>
      <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> callback<span class="token punctuation">,</span> uuid <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">publish</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">topic</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token operator">:</span> unknown<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>topics<span class="token punctuation">[</span>topic<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      topics<span class="token punctuation">[</span>topic<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">install</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">obj</span><span class="token operator">:</span> MediatorProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      obj<span class="token punctuation">.</span>uuid <span class="token operator">=</span> uuid<span class="token punctuation">;</span>
      obj<span class="token punctuation">.</span>publish <span class="token operator">=</span> publish<span class="token punctuation">;</span>
      obj<span class="token punctuation">.</span>subscribe <span class="token operator">=</span> subscribe<span class="token punctuation">;</span>
      <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> mediator<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ğŸš—-é‡å†™localstorage" tabindex="-1"><a class="header-anchor" href="#ğŸš—-é‡å†™localstorage" aria-hidden="true">#</a> ğŸš— é‡å†™<code>localStorage</code></h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// localStorage.ts</span>
<span class="token keyword">import</span> mediator <span class="token keyword">from</span> <span class="token string">&quot;./mediator&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token literal-property property">keys</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">createMediator</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> mediator<span class="token punctuation">.</span><span class="token function">install</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> sub <span class="token operator">=</span> <span class="token function">createMediator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> $localStorage <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">getItem</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">key</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function-variable function">setItem</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">key</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// é˜²æ­¢é‡å¤å‘å¸ƒ</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>keys<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> keys<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// è¢«ä¿®æ”¹å°±å‘å¸ƒäº‹ä»¶</span>
    sub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>    

    window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">clear</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¢«åˆ é™¤å°±æ¯ä¸ªkeyå‘å¸ƒäº‹ä»¶</span>
    keys<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> sub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å‘å¸ƒåæ¸…ç©ºè®°å½•keyçš„æ•°ç»„</span>
    keys<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">removeItem</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">key</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    keys<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>keys<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// è¢«ç§»é™¤å°±å‘å¸ƒ undefined</span>
    sub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span>key<span class="token punctuation">,</span>
  <span class="token literal-property property">length</span><span class="token operator">:</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ğŸš—-å®ç°usestorage-hook" tabindex="-1"><a class="header-anchor" href="#ğŸš—-å®ç°usestorage-hook" aria-hidden="true">#</a> ğŸš— å®ç°<code>useStorage hook</code></h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// useStorage.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> mediator <span class="token keyword">from</span> <span class="token string">&quot;./mediator&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">createMediator</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> mediator<span class="token punctuation">.</span><span class="token function">install</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useStorage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">key</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  
  <span class="token keyword">const</span> string <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> sub <span class="token operator">=</span> <span class="token function">createMediator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  sub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> string<span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ğŸ’-æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#ğŸ’-æµ‹è¯•" aria-hidden="true">#</a> ğŸ’ æµ‹è¯•</h3><h4 id="ğŸš—-ä½¿ç”¨localstorage" tabindex="-1"><a class="header-anchor" href="#ğŸš—-ä½¿ç”¨localstorage" aria-hidden="true">#</a> ğŸš— ä½¿ç”¨<code>localStorage</code></h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// One.vue</span>
<span class="token comment">// ä½¿ç”¨localStorage</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStorage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./hook&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token function">useStorage</span><span class="token punctuation">(</span><span class="token string">&quot;yourKey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ğŸš—-ç›‘å¬localstorageå˜åŒ–" tabindex="-1"><a class="header-anchor" href="#ğŸš—-ç›‘å¬localstorageå˜åŒ–" aria-hidden="true">#</a> ğŸš— ç›‘å¬<code>localStorage</code>å˜åŒ–</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// Two.vue</span>
<span class="token comment">// ç›‘å¬localStorage</span>
<span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> localStorage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./hook&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button
        type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span>
        @click<span class="token operator">=</span><span class="token string">&quot;$localStorage.setItem(&#39;a&#39;, count++);&quot;</span>
      <span class="token operator">&gt;</span>
        count is <span class="token punctuation">{</span><span class="token punctuation">{</span> count <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ğŸš—-ç»“æœ" tabindex="-1"><a class="header-anchor" href="#ğŸš—-ç»“æœ" aria-hidden="true">#</a> ğŸš— ç»“æœ</h4><figure><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/278f1afe15e04feaacc7ab64cefc4496~tplv-k3u1fbpfcp-watermark.image?" alt="down33.gif" tabindex="0" loading="lazy"><figcaption>down33.gif</figcaption></figure><p>å¥½äº†ä»Šå¤©çš„åˆ†äº«çš„å°±åˆ°äº†ï¼Œå¸Œæœ›ä»Šå¤©çš„åˆ†äº«å¯ä»¥å¸®åŠ©åˆ°ä½ ï¼</p>`,22),b={href:"https://codesandbox.io/p/sandbox/hardcore-hodgkin-qp5lwu",target:"_blank",rel:"noopener noreferrer"};function g(f,h){const a=o("ExternalLinkIcon");return e(),c("div",null,[u,r,k,n("ul",null,[n("li",null,[n("a",d,[s("ğŸ‰å¹²è´§æ»¡æ»¡ï¼ŒReactè®¾è®¡åŸç†(ä¸€)ï¼šè—åœ¨æºç é‡Œçš„ç´§ç®å’’ï¼Œå‡ ä¸ªå®¹æ˜“æ··æ·†çš„å˜é‡ğŸ‰"),t(a)])]),n("li",null,[n("a",v,[s("ğŸ‰å¹²è´§æ»¡æ»¡ï¼ŒReactè®¾è®¡åŸç†(äºŒ)ï¼šè—åœ¨æºç é‡Œçš„ä¸¤ä¸ªåœˆï¼Œé‡è¦çš„é“¾è¡¨ç»“æ„å’ŒåŒç¼“å­˜æŠ€æœ¯ğŸ‰"),t(a)])])]),m,n("p",null,[s("æºç ç‚¹è¿™é‡Œï¼š"),n("a",b,[s("https://codesandbox.io/p/sandbox/hardcore-hodgkin-qp5lwu"),t(a)])])])}const _=p(i,[["render",g],["__file","Vue3ä¼˜é›…çš„ç›‘å¬localStorageå˜åŒ–.html.vue"]]);export{_ as default};
