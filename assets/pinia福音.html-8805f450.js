import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{r as c,o as i,c as u,f as o,a as s,b as a,e as p}from"./app-f5aac357.js";const l={},r={href:"https://github.com/posva/pinia-colada",target:"_blank",rel:"noopener noreferrer"},d={href:"https://pinia-colada.esm.dev/",target:"_blank",rel:"noopener noreferrer"},k={href:"https://juejin.cn/post/7480379190984146982",target:"_blank",rel:"noopener noreferrer"},v={href:"https://juejin.cn/post/7478200404259536930",target:"_blank",rel:"noopener noreferrer"},m={href:"https://juejin.cn/post/7468526097011097654",target:"_blank",rel:"noopener noreferrer"},b={href:"https://juejin.cn/post/7480379190984146982",target:"_blank",rel:"noopener noreferrer"},g={href:"https://juejin.cn/post/7478200404259536930",target:"_blank",rel:"noopener noreferrer"},f={href:"https://juejin.cn/post/7468526097011097654",target:"_blank",rel:"noopener noreferrer"};function h(y,n){const t=c("ExternalLinkIcon");return i(),u("div",null,[n[13]||(n[13]=o('<h3 id="å‰è¨€" tabindex="-1"><a class="header-anchor" href="#å‰è¨€" aria-hidden="true">#</a> å‰è¨€</h3><p><code>pinia-colada</code> æ˜¯ä¸€ä¸ªåŸºäº <code>Pinia</code> çš„çŠ¶æ€ç®¡ç†åº“çš„æ’ä»¶ã€‚å®˜æ–¹çš„åŠŸèƒ½ä»‹ç»å¦‚ä¸‹ï¼š</p><ul><li>âš¡ï¸ <strong>è‡ªåŠ¨ç¼“å­˜</strong>ï¼šæ™ºèƒ½çš„å®¢æˆ·ç«¯ç¼“å­˜ï¼Œæ”¯æŒè¯·æ±‚å»é‡</li><li>ğŸ—„ï¸ <strong>å¼‚æ­¥çŠ¶æ€ç®¡ç†</strong>ï¼šè½»æ¾å¤„ç†ä»»ä½•å¼‚æ­¥çŠ¶æ€</li><li>ğŸ”Œ <strong>æ’ä»¶ç³»ç»Ÿ</strong>ï¼šå¼ºå¤§çš„æ’ä»¶ç³»ç»Ÿ</li><li>âœ¨ <strong>ä¹è§‚æ›´æ–°</strong>ï¼šè½»æ¾å®ç°ä¹è§‚æ›´æ–°</li><li>ğŸ’¡ <strong>åˆç†çš„é»˜è®¤é…ç½®</strong>ï¼šæä¾›åˆç†çš„é»˜è®¤å€¼ï¼ŒåŒæ—¶æ”¯æŒå®Œå…¨è‡ªå®šä¹‰</li><li>ï¿½ <strong>å¼€ç®±å³ç”¨çš„æ’ä»¶</strong>ï¼šä¸€ç»„å¯ç»„åˆçš„å‡½æ•°ï¼Œç”¨äºå¤„ç†æ•°æ®è·å–</li><li>ğŸ“š <strong>TypeScript æ”¯æŒ</strong>ï¼šå®Œå…¨æ”¯æŒ TypeScript</li><li>ğŸ’¨ <strong>å°ä½“ç§¯</strong>ï¼šåŸºç¡€å¤§å°çº¦ 2kbï¼Œå®Œå…¨æ”¯æŒ Tree Shaking</li><li>ğŸ“¦ <strong>é›¶ä¾èµ–</strong>ï¼šé™¤äº† Pinia å¤–ï¼Œæ²¡æœ‰ä»»ä½•å…¶ä»–ä¾èµ–</li><li>âš™ï¸ <strong>SSR æ”¯æŒ</strong>ï¼šå¼€ç®±å³ç”¨çš„æœåŠ¡ç«¯æ¸²æŸ“æ”¯æŒ</li></ul><p><code>pinia-colada</code> çš„æ ¸å¿ƒæ˜¯ï¼š <code>useQuery</code> å’Œ <code>useMutation</code>ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜æä¾›äº† <code>defineQuery</code> å’Œ <code>defineMutation</code>ï¼Œç”¨äºåœ¨ Pinia Store ä¸­å®šä¹‰æŸ¥è¯¢å’Œä¿®æ”¹æ“ä½œã€‚</p><blockquote><p>å’Œ <code>vue-use</code>ç­‰åº“æä¾›çš„<code>useAxios</code>ç±»åº“ä¸åŒï¼Œ<code>pinia-colada</code>æ˜¯å€ŸåŠ© <code>pinia</code> ç¼“å­˜è¯·æ±‚ï¼Œè‡ªå¸¦ç¼“å­˜ã€‚</p></blockquote>',5)),s("p",null,[n[2]||(n[2]=a("å®˜æ–¹åº“:")),s("a",r,[n[0]||(n[0]=a("https://github.com/posva/pinia-colada")),p(t)]),n[3]||(n[3]=s("br",null,null,-1)),n[4]||(n[4]=a(" å®˜æ–¹æ–‡æ¡£ï¼š")),s("a",d,[n[1]||(n[1]=a("https://pinia-colada.esm.dev/")),p(t)])]),n[14]||(n[14]=s("h4",{id:"å¾€æœŸç²¾å½©æ¨è",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#å¾€æœŸç²¾å½©æ¨è","aria-hidden":"true"},"#"),a(" å¾€æœŸç²¾å½©æ¨è")],-1)),s("ul",null,[s("li",null,[s("a",k,[n[5]||(n[5]=a("æœåŠ¡å™¨é˜²åƒç°æŒ‡å—äºŒ")),p(t)])]),s("li",null,[s("a",v,[n[6]||(n[6]=a("React ä¸­ä½¿ç”¨ Vue3.6 Vapor åŒæ¬¾ Signal æ˜¯ä¸€ç§ä»€ä¹ˆä½“éªŒï¼ŸğŸš€ğŸš€ğŸš€")),p(t)])]),s("li",null,[s("a",m,[n[7]||(n[7]=a("2025 å¹´äº†ï¼Œä»¤äººå”å˜˜çš„ Angularï¼Œç°åœ¨æ€ä¹ˆæ ·äº† ğŸš€ğŸš€ğŸš€")),p(t)])]),n[8]||(n[8]=s("li",null,"æ–‡ç« åŒæ­¥åœ¨å…¬ä¼—å·ï¼šèŒèŒå“’è‰å¤´å°†å†›ï¼Œæ¬¢è¿å…³æ³¨ï¼",-1))]),n[15]||(n[15]=o(`<h3 id="usequery" tabindex="-1"><a class="header-anchor" href="#usequery" aria-hidden="true">#</a> <strong><code>useQuery</code></strong></h3><h4 id="é™æ€æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#é™æ€æŸ¥è¯¢" aria-hidden="true">#</a> <strong>é™æ€æŸ¥è¯¢</strong></h4><p><code>useQuery</code> ç”¨äºç®¡ç†å¼‚æ­¥æ•°æ®è·å–ï¼Œæ”¯æŒç¼“å­˜ã€åŠ è½½çŠ¶æ€å’Œé”™è¯¯å¤„ç†ã€‚ä»¥ä¸‹æ˜¯ <code>useQuery</code> çš„åŸºæœ¬æ•°æ®æ ¼å¼ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useQuery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@pinia/colada&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span>
  <span class="token comment">// ä¸»è¦æŸ¥è¯¢å±æ€§</span>
  state<span class="token punctuation">,</span> <span class="token comment">// åŒ…å« dataã€errorã€status ç­‰çŠ¶æ€</span>
  asyncStatus<span class="token punctuation">,</span> <span class="token comment">// å¼‚æ­¥çŠ¶æ€ï¼ˆloadingã€errorã€success ç­‰ï¼‰</span>
  refresh<span class="token punctuation">,</span> <span class="token comment">// æ‰‹åŠ¨åˆ·æ–°æ•°æ®</span>
  refetch<span class="token punctuation">,</span> <span class="token comment">// é‡æ–°è·å–æ•°æ®ï¼ˆå¿½ç•¥ç¼“å­˜ï¼‰</span>
  <span class="token comment">// ä¾¿æ·åˆ«å</span>
  error<span class="token punctuation">,</span> <span class="token comment">// é”™è¯¯ä¿¡æ¯</span>
  data<span class="token punctuation">,</span> <span class="token comment">// è¯·æ±‚æˆåŠŸåçš„æ•°æ®</span>
  status<span class="token punctuation">,</span> <span class="token comment">// å½“å‰çŠ¶æ€ï¼ˆidleã€loadingã€successã€errorï¼‰</span>
  isLoading<span class="token punctuation">,</span> <span class="token comment">// æ˜¯å¦æ­£åœ¨åŠ è½½</span>
  isPending<span class="token punctuation">,</span> <span class="token comment">// æ˜¯å¦å¤„äºç­‰å¾…çŠ¶æ€</span>
  isPlaceholderData<span class="token punctuation">,</span> <span class="token comment">// æ˜¯å¦ä¸ºå ä½æ•°æ®</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;todos&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// æŸ¥è¯¢çš„å”¯ä¸€æ ‡è¯†</span>
  <span class="token function-variable function">query</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;/api/todos&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// æŸ¥è¯¢å‡½æ•°</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åŠ¨æ€æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#åŠ¨æ€æŸ¥è¯¢" aria-hidden="true">#</a> <strong>åŠ¨æ€æŸ¥è¯¢</strong></h4><p><code>key</code> ä¸ä»…å¯ä»¥æ˜¯é™æ€æ•°ç»„ï¼Œè¿˜å¯ä»¥æ˜¯å‡½æ•°ã€‚å½“ <code>key</code> ä¸ºå‡½æ•°æ—¶ï¼Œå¯ä»¥æ ¹æ®åŠ¨æ€å‚æ•°ç”Ÿæˆå”¯ä¸€çš„æŸ¥è¯¢æ ‡è¯†ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> todoId <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> isLoading <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">key</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string">&quot;todo&quot;</span><span class="token punctuation">,</span> todoId<span class="token punctuation">.</span>value<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// åŠ¨æ€ç”Ÿæˆ key</span>
  <span class="token function-variable function">query</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/api/todos/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>todoId<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å½“ todoId å˜åŒ–æ—¶ï¼ŒuseQuery ä¼šè‡ªåŠ¨é‡æ–°è·å–æ•°æ®</span>
todoId<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>åŠ¨æ€ <code>key</code> çš„ä½œç”¨</strong>:</p><ul><li>å½“ <code>key</code> å˜åŒ–æ—¶ï¼Œ<code>useQuery</code> ä¼šè‡ªåŠ¨é‡æ–°æ‰§è¡ŒæŸ¥è¯¢å‡½æ•°ã€‚</li><li>é€‚åˆéœ€è¦æ ¹æ®å‚æ•°åŠ¨æ€è·å–æ•°æ®çš„åœºæ™¯ï¼ˆå¦‚åˆ†é¡µã€ç­›é€‰ã€è¯¦æƒ…é¡µç­‰ï¼‰ã€‚</li></ul></blockquote><p>å¦‚æœåœ¨åˆ†é¡µçš„åœºæ™¯ä¸­ä½¿ç”¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>placeholderData</code> é˜²æ­¢æ¸…ç©ºæ•°æ®ï¼</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> state <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">key</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string">&quot;contacts&quot;</span><span class="token punctuation">,</span> <span class="token function">Number</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>page<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function-variable function">query</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/api/contacts?page=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token function">Number</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>page<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">placeholderData</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">previousData</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> previousData<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="definequery" tabindex="-1"><a class="header-anchor" href="#definequery" aria-hidden="true">#</a> <strong><code>defineQuery</code></strong></h3><p><code>defineQuery</code> ç”¨äºåœ¨ Pinia Store ä¸­å®šä¹‰æŸ¥è¯¢æ“ä½œã€‚å®ƒè¿”å›ä¸€ä¸ªå¯ä»¥åœ¨ Store ä¸­ä½¿ç”¨çš„æŸ¥è¯¢å‡½æ•°ã€‚</p><h4 id="åŸºæœ¬ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬ç”¨æ³•" aria-hidden="true">#</a> <strong>åŸºæœ¬ç”¨æ³•</strong></h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;pinia&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineQuery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@pinia/colada&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useTodoStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;todo&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> fetchTodos <span class="token operator">=</span> <span class="token function">defineQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;todos&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function-variable function">query</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;/api/todos&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    fetchTodos<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åœ¨ç»„ä»¶ä¸­ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#åœ¨ç»„ä»¶ä¸­ä½¿ç”¨" aria-hidden="true">#</a> <strong>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</strong></h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useTodoStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/stores/todoStore&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> todoStore <span class="token operator">=</span> <span class="token function">useTodoStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> isLoading <span class="token punctuation">}</span> <span class="token operator">=</span> todoStore<span class="token punctuation">.</span><span class="token function">fetchTodos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åŠ¨æ€æŸ¥è¯¢-1" tabindex="-1"><a class="header-anchor" href="#åŠ¨æ€æŸ¥è¯¢-1" aria-hidden="true">#</a> <strong>åŠ¨æ€æŸ¥è¯¢</strong></h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> fetchTodoById <span class="token operator">=</span> <span class="token function">defineQuery</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">key</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string">&quot;todo&quot;</span><span class="token punctuation">,</span> id<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// åŠ¨æ€ç”Ÿæˆ key</span>
  <span class="token function-variable function">query</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">/api/todos/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token punctuation">,</span> isLoading <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">fetchTodoById</span><span class="token punctuation">(</span>todoId<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="usemutation" tabindex="-1"><a class="header-anchor" href="#usemutation" aria-hidden="true">#</a> <strong><code>useMutation</code></strong></h3><h4 id="åŸºæœ¬ç”¨æ³•-1" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬ç”¨æ³•-1" aria-hidden="true">#</a> <strong>åŸºæœ¬ç”¨æ³•</strong></h4><p><code>useMutation</code> ç”¨äºè¯·æ±‚å‰¯ä½œç”¨ï¼Œç®¡ç†æ•°æ®ä¿®æ”¹æ“ä½œï¼ˆå¦‚ <code>POSTã€PUTã€DELETE</code> è¯·æ±‚ï¼‰ã€‚ä»¥ä¸‹æ˜¯ <code>useMutation</code> çš„åŸºæœ¬ç”¨æ³•ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useMutation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@pinia/colada&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span>
  mutate<span class="token punctuation">,</span> <span class="token comment">// è§¦å‘ä¿®æ”¹æ“ä½œçš„å‡½æ•°</span>
  state<span class="token punctuation">,</span> <span class="token comment">// åŒ…å« dataã€errorã€status ç­‰çŠ¶æ€</span>
  asyncStatus<span class="token punctuation">,</span> <span class="token comment">// å¼‚æ­¥çŠ¶æ€ï¼ˆloadingã€errorã€success ç­‰ï¼‰</span>
  reset<span class="token punctuation">,</span> <span class="token comment">// é‡ç½®çŠ¶æ€</span>
  <span class="token comment">// ä¾¿æ·åˆ«å</span>
  error<span class="token punctuation">,</span> <span class="token comment">// é”™è¯¯ä¿¡æ¯</span>
  data<span class="token punctuation">,</span> <span class="token comment">// è¯·æ±‚æˆåŠŸåçš„æ•°æ®</span>
  status<span class="token punctuation">,</span> <span class="token comment">// å½“å‰çŠ¶æ€ï¼ˆidleã€loadingã€successã€errorï¼‰</span>
  isLoading<span class="token punctuation">,</span> <span class="token comment">// æ˜¯å¦æ­£åœ¨åŠ è½½</span>
  isPending<span class="token punctuation">,</span> <span class="token comment">// æ˜¯å¦å¤„äºç­‰å¾…çŠ¶æ€</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useMutation</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">mutation</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">newTodo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;/api/todos&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>newTodo<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// è§¦å‘ä¿®æ”¹æ“ä½œ</span>
<span class="token function">mutate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;New Todo&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">completed</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="definemutation" tabindex="-1"><a class="header-anchor" href="#definemutation" aria-hidden="true">#</a> <strong><code>defineMutation</code></strong></h3><p><code>defineMutation</code> ç”¨äºåœ¨ Pinia Store ä¸­å®šä¹‰ä¿®æ”¹æ“ä½œã€‚å®ƒè¿”å›ä¸€ä¸ªå¯ä»¥åœ¨ Store ä¸­ä½¿ç”¨çš„ä¿®æ”¹å‡½æ•°ã€‚</p><h4 id="åŸºæœ¬ç”¨æ³•-2" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬ç”¨æ³•-2" aria-hidden="true">#</a> <strong>åŸºæœ¬ç”¨æ³•</strong></h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;pinia&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineMutation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@pinia/colada&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useTodoStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&quot;todo&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> addTodo <span class="token operator">=</span> <span class="token function">defineMutation</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">mutation</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">newTodo</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;/api/todos&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>newTodo<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    addTodo<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åœ¨ç»„ä»¶ä¸­ä½¿ç”¨-1" tabindex="-1"><a class="header-anchor" href="#åœ¨ç»„ä»¶ä¸­ä½¿ç”¨-1" aria-hidden="true">#</a> <strong>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</strong></h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useTodoStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/stores/todoStore&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> todoStore <span class="token operator">=</span> <span class="token function">useTodoStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> mutate<span class="token punctuation">,</span> isLoading <span class="token punctuation">}</span> <span class="token operator">=</span> todoStore<span class="token punctuation">.</span>addTodo<span class="token punctuation">;</span>

<span class="token comment">// è§¦å‘ä¿®æ”¹æ“ä½œ</span>
<span class="token function">mutate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;New Todo&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">completed</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> <strong>æ€»ç»“</strong></h3><p><code>pinia-colada</code> é€šè¿‡ <code>useQuery</code>ã€<code>defineQuery</code>ã€<code>useMutation</code> å’Œ <code>defineMutation</code> æä¾›äº†ä¸€å¥—å¼ºå¤§çš„å·¥å…·ï¼Œç®€åŒ–äº† <code>Vue</code>åº”ç”¨ä¸­çš„å¼‚æ­¥çŠ¶æ€ç®¡ç†å’Œæ•°æ®åŠ è½½é€»è¾‘ã€‚æ— è®ºæ˜¯é™æ€æŸ¥è¯¢è¿˜æ˜¯åŠ¨æ€æŸ¥è¯¢ï¼Œéƒ½èƒ½è½»æ¾åº”å¯¹å¤æ‚åœºæ™¯ã€‚</p><h4 id="å¾€æœŸç²¾å½©æ¨è-1" tabindex="-1"><a class="header-anchor" href="#å¾€æœŸç²¾å½©æ¨è-1" aria-hidden="true">#</a> å¾€æœŸç²¾å½©æ¨è</h4>`,31)),s("ul",null,[s("li",null,[s("a",b,[n[9]||(n[9]=a("æœåŠ¡å™¨é˜²åƒç°æŒ‡å—äºŒ")),p(t)])]),s("li",null,[s("a",g,[n[10]||(n[10]=a("React ä¸­ä½¿ç”¨ Vue3.6 Vapor åŒæ¬¾ Signal æ˜¯ä¸€ç§ä»€ä¹ˆä½“éªŒï¼ŸğŸš€ğŸš€ğŸš€")),p(t)])]),s("li",null,[s("a",f,[n[11]||(n[11]=a("2025 å¹´äº†ï¼Œä»¤äººå”å˜˜çš„ Angularï¼Œç°åœ¨æ€ä¹ˆæ ·äº† ğŸš€ğŸš€ğŸš€")),p(t)])]),n[12]||(n[12]=s("li",null,"æ–‡ç« åŒæ­¥åœ¨å…¬ä¼—å·ï¼šèŒèŒå“’è‰å¤´å°†å†›ï¼Œæ¬¢è¿å…³æ³¨ï¼",-1))])])}const w=e(l,[["render",h],["__file","piniaç¦éŸ³.html.vue"]]);export{w as default};
