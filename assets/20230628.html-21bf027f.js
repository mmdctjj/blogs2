import{_ as s}from"./plugin-vue_export-helper-c27b6911.js";import{o as a,c as p,f as t}from"./app-b01463d0.js";const e={};function o(l,n){return a(),p("div",null,n[0]||(n[0]=[t(`<blockquote><p>æ–‡ç« é¦–å‘å…¬ä¼—å·ï¼šèŒèŒå“’è‰å¤´å°†å†›ï¼Œæ¬¢è¿å…³æ³¨</p></blockquote><h3 id="ğŸš€-å…³é”®æ¥å£ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#ğŸš€-å…³é”®æ¥å£ä»‹ç»" aria-hidden="true">#</a> ğŸš€ å…³é”®æ¥å£ä»‹ç»</h3><p>æœ€è¿‘æƒ³ä½“éªŒä¸‹è‡ªå®šä¹‰æŒ‡ä»¤åŠŸèƒ½ï¼Œçœ‹äº†çœ‹æ–‡æ¡£å’Œ vue2 å·®å¼‚ä¸å¤§ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> myDirective <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token comment">// åœ¨ç»‘å®šå…ƒç´ çš„ attribute å‰ </span>
<span class="token comment">// æˆ–äº‹ä»¶ç›‘å¬å™¨åº”ç”¨å‰è°ƒç”¨</span>
<span class="token function">created</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> prevVnode</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span> <span class="token comment">// ä¸‹é¢ä¼šä»‹ç»å„ä¸ªå‚æ•°çš„ç»†èŠ‚ }, </span>
<span class="token comment">// åœ¨å…ƒç´ è¢«æ’å…¥åˆ° DOM å‰è°ƒç”¨</span>
<span class="token function">beforeMount</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> prevVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// åœ¨ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶</span>
<span class="token comment">// åŠä»–è‡ªå·±çš„æ‰€æœ‰å­èŠ‚ç‚¹éƒ½æŒ‚è½½å®Œæˆåè°ƒç”¨</span>
<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> prevVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶æ›´æ–°å‰è°ƒç”¨</span>
<span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> prevVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// åœ¨ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶</span>
<span class="token comment">// åŠä»–è‡ªå·±çš„æ‰€æœ‰å­èŠ‚ç‚¹éƒ½æ›´æ–°åè°ƒç”¨</span>
<span class="token function">updated</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> prevVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶å¸è½½å‰è°ƒç”¨</span>
<span class="token function">beforeUnmount</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> prevVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶å¸è½½åè°ƒç”¨</span>
<span class="token function">unmounted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">,</span> prevVnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>èµ·åˆï¼Œæœ€å¤§çš„ç—›ç‚¹æ˜¯éœ€è¦æ‰‹åŠ¨åˆ›å»º dom ï¼Œç„¶åæ’å…¥ el ä¸­ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> loadingDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">calss</span><span class="token operator">:</span> <span class="token string">&#39;loading&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
el<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>loadingDom<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ ·å¥½éš¾å—å•Šï¼Œæˆ‘ä¸æƒ³å†™åŸç”Ÿ dom ï¼Œèƒ½ä¸èƒ½å†™ä¸ªç»„ä»¶æ¸²æŸ“åˆ°æŒ‡ä»¤é‡Œå‘¢ï¼Ÿ</p><p>æˆ‘æƒ³èµ·äº†æˆ‘ä¹‹å‰çœ‹åˆ°çš„å‡ ä¸ª vue æ¥å£ï¼Œ</p><ul><li>hå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ vue æä¾›çš„åˆ›å»º vNode çš„å‡½æ•°</li><li>renderå‡½æ•°ï¼šå°† vNode æ¸²æŸ“åˆ° çœŸå® dom é‡Œçš„å‡½æ•°</li></ul><p>hå‡½æ•°ç”¨æ³•å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// å®Œæ•´å‚æ•°ç­¾å</span>
<span class="token keyword">function</span> <span class="token function">h</span><span class="token punctuation">(</span>
    <span class="token parameter"><span class="token literal-property property">type</span><span class="token operator">:</span> string <span class="token operator">|</span> Component<span class="token punctuation">,</span>
    props<span class="token operator">?</span><span class="token operator">:</span> object <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    children<span class="token operator">?</span><span class="token operator">:</span> Children <span class="token operator">|</span> Slot <span class="token operator">|</span> Slots</span>
<span class="token punctuation">)</span><span class="token operator">:</span> VNode
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¾‹å¦‚ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> h <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>

<span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword">class</span><span class="token operator">:</span> <span class="token string">&#39;container&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
  <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;h1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Hello, Vue 3&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&#39;p&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;This is a paragraph&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬ä½¿ç”¨hå‡½æ•°åˆ›å»ºäº†ä¸€ä¸ª VNodeï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªåŒ…å« divã€h1ã€p çš„ DOM ç»“æ„ã€‚å…¶ä¸­ï¼Œdiv çš„ class å±æ€§ä¸º container</p><h3 id="ğŸš€-è‡ªå®šä¹‰-loading-ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#ğŸš€-è‡ªå®šä¹‰-loading-ç»„ä»¶" aria-hidden="true">#</a> ğŸš€ è‡ªå®šä¹‰ loading ç»„ä»¶</h3><p>ç„¶è€Œï¼Œå½“æˆ‘ä½¿ç”¨ props ä¸ºç»„ä»¶ä¼ é€’å€¼æ—¶ï¼Œå‘ç°æ˜¯å¾’åŠ³çš„ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> Loading <span class="token keyword">from</span> <span class="token string">&#39;./components/Loading.vue&#39;</span><span class="token punctuation">;</span>

cconst option <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">&#39;ä¸€å¤§æ³¢åƒµå°¸æ¥è¢­&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loading</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>
    Loading<span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;loading&#39;</span><span class="token punctuation">,</span> <span class="token operator">...</span>option<span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»…ä»…å¦‚ä¸‹å›¾ä¸€æ ·ï¼Œæˆ‘ä»¥ä¸ºæ˜¯ç»™ç»„ä»¶çš„ propsï¼Œå®é™…ä¸Šæ˜¯ dom çš„ propsã€‚</p><figure><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/267b68e314a24280b84290fc80059ba7~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>æ­¤æ—¶æˆ‘ä»¬çš„ç»„ä»¶åªèƒ½é€šè¿‡ <code>$attrs</code> æ¥è·å–è¿™äº› props äº†ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>

  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;loading&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>span v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;$attrs.msg !== false&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> $attrs<span class="token punctuation">.</span>msg <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥ç€æˆ‘ä»¬ç»™ç»„ä»¶å®ç° loading åŠ¨ç”»ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ç»„ä»¶åº“çš„ loading ç»„ä»¶ã€‚</p><p>æˆ‘çš„å®ç°å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
  @keyframes identifier <span class="token punctuation">{</span>
    <span class="token number">100</span><span class="token operator">%</span> <span class="token punctuation">{</span>
      <span class="token operator">-</span>webkit<span class="token operator">-</span>transform<span class="token operator">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">.</span>loading <span class="token punctuation">{</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">.</span>loading div <span class="token punctuation">{</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> 50px<span class="token punctuation">;</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> 50px<span class="token punctuation">;</span>
    border<span class="token operator">-</span>radius<span class="token operator">:</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>
    <span class="token literal-property property">border</span><span class="token operator">:</span> 2px solid green<span class="token punctuation">;</span>
    <span class="token literal-property property">margin</span><span class="token operator">:</span> 25px auto<span class="token punctuation">;</span>
    border<span class="token operator">-</span>top<span class="token operator">:</span> none<span class="token punctuation">;</span>
    border<span class="token operator">-</span>left<span class="token operator">:</span> none<span class="token punctuation">;</span>
    <span class="token literal-property property">animation</span><span class="token operator">:</span> identifier 1s infinite linear<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ğŸš€-è‡ªå®šä¹‰æŒ‡ä»¤" tabindex="-1"><a class="header-anchor" href="#ğŸš€-è‡ªå®šä¹‰æŒ‡ä»¤" aria-hidden="true">#</a> ğŸš€ è‡ªå®šä¹‰æŒ‡ä»¤</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°è£…è‡ªå®šä¹‰æŒ‡ä»¤ã€‚</p><p>æˆ‘ä»¬çš„æ€è·¯æ˜¯ï¼š</p><ul><li>mounted é˜¶æ®µï¼Œå¦‚æœæ˜¯ trueï¼Œé‚£ä¹ˆæ¸²æŸ“ç»„ä»¶ï¼Œå¦åˆ™ä»€ä¹ˆéƒ½ä¸åšã€‚</li><li>update é˜¶æ®µï¼Œå¦‚æœ true åˆ™é‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œå¦‚æœ false åˆ™æ¸²æŸ“ vnode</li></ul><p>ä¸ºäº†å¯ä»¥åº”å¯¹æ›´å¤šåœºæ™¯ï¼Œæˆ‘ä»¬æœŸæœ›å¯ä»¥é…ç½®åŠ è½½ä¸­çš„æç¤ºä¿¡æ¯ï¼Œä¸é…ç½®ä½¿ç”¨é»˜è®¤å€¼ï¼Œå¦‚æœæ˜¯ false ï¼Œé‚£ä¹ˆä»…å±•ç¤º loading å›¾ã€‚æ‰€ä»¥å‚æ•°ç±»å‹å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">interface</span> <span class="token class-name">Props</span>  <span class="token punctuation">{</span><span class="token literal-property property">loading</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span> msg<span class="token operator">?</span><span class="token operator">:</span> string <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">}</span>

v<span class="token operator">-</span>loading<span class="token operator">:</span> boolean <span class="token operator">|</span> Props
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±äºå¯èƒ½æ˜¯å¸ƒå°”å€¼ï¼Œä¹Ÿå¯èƒ½æ˜¯å¯¹è±¡ï¼Œæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–é…ç½®å‚æ•°</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">formatOption</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">value</span><span class="token operator">:</span> boolean <span class="token operator">|</span> Props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> loading <span class="token operator">=</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&#39;boolean&#39;</span>
      <span class="token operator">?</span> value 
      <span class="token operator">:</span> value<span class="token punctuation">.</span>loading
  <span class="token keyword">const</span> option <span class="token operator">=</span> <span class="token keyword">typeof</span> value <span class="token operator">!==</span> <span class="token string">&#39;boolean&#39;</span>
    <span class="token operator">?</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>defaultOption<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token punctuation">{</span>
      loading<span class="token punctuation">,</span>
      <span class="token operator">...</span>defaultOption
    <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> loading<span class="token punctuation">,</span> option <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥ç€å† mounted é˜¶æ®µè·å–æ ¼å¼åŒ–åçš„ loading å’Œ optionï¼Œå¦‚æœä¸º true åˆ™ç›´æ¥æ¸²æŸ“ç»„ä»¶ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token literal-property property">vLoading</span><span class="token operator">:</span> Directive<span class="token operator">&lt;</span>HTMLElement<span class="token punctuation">,</span> boolean <span class="token operator">|</span> Props<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span> loading<span class="token punctuation">,</span> option <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">formatOption</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>value<span class="token punctuation">)</span>

    loading <span class="token operator">&amp;&amp;</span> <span class="token function">renderLoading</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> option<span class="token punctuation">)</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">renderLoading</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">el</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">,</span> <span class="token literal-property property">option</span><span class="token operator">:</span> Props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>
    Loading<span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;loading&#39;</span><span class="token punctuation">,</span> <span class="token operator">...</span>option<span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
  el<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token function">render</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> el<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœè¿›å…¥ update é˜¶æ®µï¼Œåˆ™æ ¹æ®æƒ…å†µé€‰æ‹©æ¸²æŸ“ laoding ç»„ä»¶è¿˜æ˜¯ vnodeã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token literal-property property">vLoading</span><span class="token operator">:</span> Directive<span class="token operator">&lt;</span>HTMLElement<span class="token punctuation">,</span> boolean <span class="token operator">|</span> Props<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span> loading<span class="token punctuation">,</span> option <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">formatOption</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>value<span class="token punctuation">)</span>

    loading <span class="token operator">&amp;&amp;</span> <span class="token function">renderLoading</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> option<span class="token punctuation">)</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">updated</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">el</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span> loading<span class="token punctuation">,</span> option <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">formatOption</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>value<span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>loading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">renderLoading</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> option<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">renderVNode</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">renderLoading</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">el</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">,</span> <span class="token literal-property property">option</span><span class="token operator">:</span> Props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>
    Loading<span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;loading&#39;</span><span class="token punctuation">,</span> <span class="token operator">...</span>option<span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
  el<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token function">render</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> el<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">renderVNode</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">el</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">,</span> <span class="token literal-property property">vnode</span><span class="token operator">:</span> VNode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  el<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;#loading&#39;</span><span class="token punctuation">)</span><span class="token operator">?.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">render</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> el<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬éªŒè¯ä¸‹åŠŸèƒ½ï¼š</p><ul><li>é»˜è®¤åŠŸèƒ½</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> loading <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> loading<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">&quot;width: 300px&quot;</span> v<span class="token operator">-</span>loading<span class="token operator">=</span>laoding<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>åŠ è½½æˆåŠŸ<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/244ea2bc975d404fab0e3ec848ea5e6b~tplv-k3u1fbpfcp-watermark.image?" alt="laoding1.gif" tabindex="0" loading="lazy"><figcaption>laoding1.gif</figcaption></figure><ul><li>è‡ªå®šä¹‰æ–‡æœ¬</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">&quot;width: 300px&quot;</span> v<span class="token operator">-</span>loading<span class="token operator">=</span><span class="token string">&quot;{ loading, msg: &#39;ä¸€å¤§æ³¢åƒµå°¸æ¥è¢­&#39; }&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>åŠ è½½æˆåŠŸ<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3a95db550a7a43ba886b18594d1b7495~tplv-k3u1fbpfcp-watermark.image?" alt="laoding2.gif" tabindex="0" loading="lazy"><figcaption>laoding2.gif</figcaption></figure><ul><li>ä¸å±•ç¤ºæ–‡æœ¬</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">&quot;width: 300px&quot;</span> v<span class="token operator">-</span>loading<span class="token operator">=</span><span class="token string">&quot;{ loading, msg: false }&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>åŠ è½½æˆåŠŸ<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ac5b8327e1514395ad386cc12c9f7179~tplv-k3u1fbpfcp-watermark.image?" alt="laoding3.gif" tabindex="0" loading="lazy"><figcaption>laoding3.gif</figcaption></figure><h3 id="ğŸ‰-æœ€å" tabindex="-1"><a class="header-anchor" href="#ğŸ‰-æœ€å" aria-hidden="true">#</a> ğŸ‰ æœ€å</h3><p>ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™äº†ï¼Œå¦‚æœæœ‰é—®é¢˜ï¼Œå¯ä»¥è¯„è®ºåŒºå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šåŠæ—¶æ›´æ­£ã€‚</p><p>ä»¥ä¸‹æ˜¯å®Œæ•´çš„ä»£ç ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>

  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;loading&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>span v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;$attrs.msg !== false&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> $attrs<span class="token punctuation">.</span>msg <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
  
<span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
  
<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
  @keyframes identifier <span class="token punctuation">{</span>
    <span class="token number">100</span><span class="token operator">%</span> <span class="token punctuation">{</span>
      <span class="token operator">-</span>webkit<span class="token operator">-</span>transform<span class="token operator">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">.</span>loading <span class="token punctuation">{</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">.</span>loading div <span class="token punctuation">{</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> 50px<span class="token punctuation">;</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> 50px<span class="token punctuation">;</span>
    border<span class="token operator">-</span>radius<span class="token operator">:</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>
    <span class="token literal-property property">border</span><span class="token operator">:</span> 2px solid green<span class="token punctuation">;</span>
    <span class="token literal-property property">margin</span><span class="token operator">:</span> 25px auto<span class="token punctuation">;</span>
    border<span class="token operator">-</span>top<span class="token operator">:</span> none<span class="token punctuation">;</span>
    border<span class="token operator">-</span>left<span class="token operator">:</span> none<span class="token punctuation">;</span>
    <span class="token literal-property property">animation</span><span class="token operator">:</span> identifier 1s infinite linear<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Directive<span class="token punctuation">,</span> VNode<span class="token punctuation">,</span> h<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> render  <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Loading <span class="token keyword">from</span> <span class="token string">&#39;./components/Loading.vue&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token literal-property property">defaultOption</span><span class="token operator">:</span> <span class="token punctuation">{</span>msg<span class="token operator">?</span><span class="token operator">:</span> string <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">&#39;åŠªåŠ›åŠ è½½ä¸­&#39;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Props</span>  <span class="token punctuation">{</span><span class="token literal-property property">loading</span><span class="token operator">:</span> boolean<span class="token punctuation">,</span> msg<span class="token operator">?</span><span class="token operator">:</span> string <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">formatOption</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">value</span><span class="token operator">:</span> boolean <span class="token operator">|</span> Props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> loading <span class="token operator">=</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&#39;boolean&#39;</span>
      <span class="token operator">?</span> value 
      <span class="token operator">:</span> value<span class="token punctuation">.</span>loading
  <span class="token keyword">const</span> option <span class="token operator">=</span> <span class="token keyword">typeof</span> value <span class="token operator">!==</span> <span class="token string">&#39;boolean&#39;</span>
    <span class="token operator">?</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>defaultOption<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token punctuation">{</span>
      loading<span class="token punctuation">,</span>
      <span class="token operator">...</span>defaultOption
    <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> loading<span class="token punctuation">,</span> option <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">renderLoading</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">el</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">,</span> <span class="token literal-property property">option</span><span class="token operator">:</span> Props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> vnode <span class="token operator">=</span> <span class="token function">h</span><span class="token punctuation">(</span>
    Loading<span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;loading&#39;</span><span class="token punctuation">,</span> <span class="token operator">...</span>option<span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
  el<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token function">render</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> el<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">renderVNode</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">el</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">,</span> <span class="token literal-property property">vnode</span><span class="token operator">:</span> VNode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  el<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;#loading&#39;</span><span class="token punctuation">)</span><span class="token operator">?.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">render</span><span class="token punctuation">(</span>vnode<span class="token punctuation">,</span> el<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token literal-property property">vLoading</span><span class="token operator">:</span> Directive<span class="token operator">&lt;</span>HTMLElement<span class="token punctuation">,</span> boolean <span class="token operator">|</span> Props<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span> loading<span class="token punctuation">,</span> option <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">formatOption</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>value<span class="token punctuation">)</span>

    loading <span class="token operator">&amp;&amp;</span> <span class="token function">renderLoading</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> option<span class="token punctuation">)</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">updated</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">el</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span> loading<span class="token punctuation">,</span> option <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">formatOption</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>value<span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>loading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">renderLoading</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> option<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">renderVNode</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> loading <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> loading<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">&quot;width: 300px&quot;</span> v<span class="token operator">-</span>loading<span class="token operator">=</span><span class="token string">&quot;{ loading, msg: &#39;ä¸€å¤§æ³¢åƒµå°¸æ¥è¢­&#39; }&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>åŠ è½½æˆåŠŸ<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,51)]))}const r=s(e,[["render",o],["__file","20230628.html.vue"]]);export{r as default};
