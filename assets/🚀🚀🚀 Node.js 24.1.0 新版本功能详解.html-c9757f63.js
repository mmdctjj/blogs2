import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r,o as c,c as d,a as n,b as s,e as o,f as p}from"./app-086b4fa6.js";const i={},l={href:"https://juejin.cn/post/7506754146893725750",target:"_blank",rel:"noopener noreferrer"},u={href:"https://juejin.cn/user/1116759543260727/posts",title:"https://juejin.cn/user/1116759543260727/posts",target:"_blank",rel:"noopener noreferrer"},h={href:"https://juejin.cn/user/1116759543260727/posts",title:"https://juejin.cn/user/1116759543260727/posts",target:"_blank",rel:"noopener noreferrer"},k={href:"https://juejin.cn/post/7506754146893725750",target:"_blank",rel:"noopener noreferrer"},g={href:"https://juejin.cn/user/1116759543260727/posts",title:"https://juejin.cn/user/1116759543260727/posts",target:"_blank",rel:"noopener noreferrer"},m={href:"https://juejin.cn/user/1116759543260727/posts",title:"https://juejin.cn/user/1116759543260727/posts",target:"_blank",rel:"noopener noreferrer"};function v(b,e){const a=r("ExternalLinkIcon");return c(),d("div",null,[e[8]||(e[8]=n("h3",{id:"前言",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#前言","aria-hidden":"true"},"#"),s(" 前言")],-1)),e[9]||(e[9]=n("p",null,[s("凌晨，Node.js 官方发布了 "),n("code",null,"24.1.0"),s(" 版本，快来跟我看看更新了哪些内容吧！")],-1)),e[10]||(e[10]=n("h4",{id:"往期精彩推荐",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#往期精彩推荐","aria-hidden":"true"},"#"),s(" 往期精彩推荐")],-1)),n("ul",null,[n("li",null,[n("a",l,[e[0]||(e[0]=s("🚀🚀🚀 AI 助手好写，太好写了，分分钟写出来，不用一周，三分钟！")),o(a)])]),n("li",null,[n("a",u,[e[1]||(e[1]=s("优雅，太优雅了，NestJS 🔥 实在是太优雅了！🚀🚀🚀")),o(a)])]),n("li",null,[n("a",h,[e[2]||(e[2]=s("🚀🚀 🚀 太棒了，有了它，终于不用翻阅屎山 💩 代码了！")),o(a)])]),e[3]||(e[3]=n("li",null,"更多精彩文章欢迎关注我的公众号：萌萌哒草头将军",-1))]),e[11]||(e[11]=p(`<h4 id="正文" tabindex="-1"><a class="header-anchor" href="#正文" aria-hidden="true">#</a> 正文</h4><p><code>Node.js 24.1.0</code> 版本引入了一系列新功能和改进，涵盖 <code>文件系统</code>、<code>HTTP/2</code>、<code>调试工具</code>、<code>REPL</code> 等多个模块！</p><h5 id="_1-文件系统-fs-模块增强" tabindex="-1"><a class="header-anchor" href="#_1-文件系统-fs-模块增强" aria-hidden="true">#</a> 1. 文件系统（<code>fs</code>）模块增强</h5><p><code>Node.js 24.1.0</code> 对文件系统模块进行了两项重要改进：</p><ul><li><strong>显式资源管理支持</strong>：为 <code>Dir</code> 类添加了显式资源管理支持（标记为 <code>SEMVER-MINOR</code>）。这一改进通过优化目录资源管理，可能减少资源泄漏问题并提升性能，尤其在处理大量文件操作时效果显著。</li><li><strong><code>URL</code> 支持</strong>：为 <code>fs.glob</code> 的 <code>cwd</code> 选项添加了对 <code>URL</code> 的支持。开发者现在可以使用 <code>URL</code> 格式指定工作目录，例如：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> glob <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;fs/promises&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> <span class="token function">glob</span><span class="token punctuation">(</span><span class="token string">&quot;*.js&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">cwd</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&quot;file:///path/to/dir/&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>这增加了文件操作的灵活性，特别是在跨平台开发中。</li></ul><h5 id="_2-http-2-模块" tabindex="-1"><a class="header-anchor" href="#_2-http-2-模块" aria-hidden="true">#</a> 2. <code>HTTP/2</code> 模块</h5><p><code>Node.js 24.1.0</code> 为 <code>HTTP/2</code> 模块新增了两个诊断通道：</p><ul><li><strong><code>http2.client.stream.start</code></strong>：用于监控 <code>HTTP/2</code> 客户端流的启动事件，帮助开发者跟踪流的初始化过程。</li><li><strong><code>http2.client.stream.created</code></strong>：用于监控 <code>HTTP/2</code> 客户端流的创建事件，提供流的创建时间和状态信息。<br> 这些通道为调试高性能网络应用提供了更细粒度的工具。例如，开发者可以通过监听这些事件来分析 <code>HTTP/2</code> 流的性能瓶颈。</li></ul><h5 id="_3-inspector-模块" tabindex="-1"><a class="header-anchor" href="#_3-inspector-模块" aria-hidden="true">#</a> 3. <code>Inspector</code> 模块</h5><ul><li><strong>Worker 检查支持</strong>：<code>Node.js 24.1.0</code> 在 <code>Chrome DevTools</code> 中支持 worker 线程的检查。通过使用 <code>--experimental-worker-inspection</code> 标志，开发者可以调试多线程 <code>Node.js</code> 应用程序。例如：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>node <span class="token operator">--</span>inspect<span class="token operator">-</span>brk <span class="token operator">--</span>experimental<span class="token operator">-</span>worker<span class="token operator">-</span>inspection index<span class="token punctuation">.</span>js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>这一功能利用了 <code>Chrome DevTools Protocol</code> 的 <code>Target</code> 域，通过 <code>attachedToTarget</code> 事件管理每个 worker 线程的调试会话。这对于开发复杂的并发应用（如多线程数据处理）尤为重要。</li></ul><h5 id="_4-repl-模块" tabindex="-1"><a class="header-anchor" href="#_4-repl-模块" aria-hidden="true">#</a> 4. <code>REPL</code> 模块</h5><p><code>REPL</code>（交互式解释器）模块在用户体验方面得到了显著改进：</p><ul><li><strong>垂直光标移动</strong>：新增了适当的垂直光标移动功能，允许用户在多行输入中更自然地上下移动光标，提升了交互效率。</li><li><strong>多行命令编辑</strong>：支持在输入多行命令时进行编辑。例如，开发者可以在输入以下代码时随时修改：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 可以插入新行或编辑现有行</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>这一功能仅在 <code>TTY</code> 环境中有效，且需要命令不完整（如缺少闭合括号）才能插入新行。未来可能通过快捷键（如 <code>Shift + Enter</code>）进一步优化。</li></ul><h5 id="_5-sqlite-模块" tabindex="-1"><a class="header-anchor" href="#_5-sqlite-模块" aria-hidden="true">#</a> 5. <code>SQLite</code> 模块</h5><ul><li><strong>备份功能增强</strong>：为 <code>sqlite.backup()</code> 方法添加了 <code>name</code> 和 <code>length</code> 参数，允许更精确地控制备份操作。例如：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span><span class="token function">backup</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;backup.db&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">1024</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><strong>构建选项</strong>：新增了无 <code>SQLite</code> 的构建选项，开发者可以通过配置跳过 <code>SQLite</code> 依赖，适合轻量级部署场景。</li></ul><h5 id="_6-测试运行器-test-runner" tabindex="-1"><a class="header-anchor" href="#_6-测试运行器-test-runner" aria-hidden="true">#</a> 6. 测试运行器（<code>test_runner</code>）</h5><ul><li><strong>行为统一</strong>：当隔离模式为 <code>none</code> 时，统一了 <code>--require</code> 和 <code>--import</code> 的行为，确保测试运行器在不同模块加载方式下表现一致。这减少了配置错误的可能性。</li></ul><h5 id="_7-url-模块" tabindex="-1"><a class="header-anchor" href="#_7-url-模块" aria-hidden="true">#</a> 7. <code>URL</code> 模块</h5><ul><li><strong>性能改进</strong>：优化了 <code>format</code> 函数的性能，提高了 <code>URL</code> 处理的效率。例如：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> format <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;url&quot;</span><span class="token punctuation">;</span>
<span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">&quot;http://example.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 更快地生成格式化 URL</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>这在高负载的 <code>Web</code> 应用中尤为重要。</li></ul><h5 id="_8-util-模块" tabindex="-1"><a class="header-anchor" href="#_8-util-模块" aria-hidden="true">#</a> 8. <code>Util</code> 模块</h5><ul><li><strong>内部函数</strong>：新增了内部函数 <code>assignFunctionName()</code>，用于更方便地管理函数名称，可能提升代码的可读性和调试效率。</li></ul><h5 id="_9-其他改进" tabindex="-1"><a class="header-anchor" href="#_9-其他改进" aria-hidden="true">#</a> 9. 其他改进</h5><ul><li><strong>代码覆盖率</strong>：相关更改的代码覆盖率较高，例如 <code>REPL</code> 模块的补丁覆盖率达到 <code>99.55%</code>，确保了新功能的稳定性。</li><li><strong>平台支持</strong>：<code>Node.js 24.1.0</code> 提供了适用于 <code>Windows</code>、<code>macOS</code>、<code>Linux</code> 等多个平台的二进制文件和源代码，开发者可从官方 <code>Node.js</code> 网站下载。</li></ul><p>这些更新体现了 <code>Node.js</code> 社区对性能、调试能力和用户体验的持续关注，为开发者提供了更强大的工具来应对现代开发需求。</p><h3 id="最后" tabindex="-1"><a class="header-anchor" href="#最后" aria-hidden="true">#</a> 最后</h3><p><code>Node.js 24.1.0</code> 版本通过一系列功能增强和优化，为开发者带来了更强大的开发支持。从文件系统和 <code>HTTP/2</code> 的改进，到调试能力和 <code>REPL</code> 体验的提升，这些更新都为构建高效、可靠的应用程序提供了便利。希望本文能帮助您快速掌握这一版本的亮点，并在实际开发中灵活运用。</p><p>今天的分享就这些了，感谢大家的阅读，如果文章中存在错误的地方欢迎指正！</p><h4 id="往期精彩推荐-1" tabindex="-1"><a class="header-anchor" href="#往期精彩推荐-1" aria-hidden="true">#</a> 往期精彩推荐</h4>`,28)),n("ul",null,[n("li",null,[n("a",k,[e[4]||(e[4]=s("🚀🚀🚀 AI 助手好写，太好写了，分分钟写出来，不用一周，三分钟！")),o(a)])]),n("li",null,[n("a",g,[e[5]||(e[5]=s("优雅，太优雅了，NestJS 🔥 实在是太优雅了！🚀🚀🚀")),o(a)])]),n("li",null,[n("a",m,[e[6]||(e[6]=s("🚀🚀 🚀 太棒了，有了它，终于不用翻阅屎山 💩 代码了！")),o(a)])]),e[7]||(e[7]=n("li",null,"更多精彩文章欢迎关注我的公众号：萌萌哒草头将军",-1))])])}const _=t(i,[["render",v],["__file","🚀🚀🚀 Node.js 24.1.0 新版本功能详解.html.vue"]]);export{_ as default};
